(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51718,18357,27215,61086,59141,e=>{"use strict";var r,n,i,s,a,o=e.i(92953),l=e.i(97427),c=e.i(83877),u=e.i(8070);function d(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let h=new l.ErrorFactory("auth","Firebase",d()),f=new c.Logger("@firebase/auth");function p(e,...r){f.logLevel<=c.LogLevel.ERROR&&f.error(`Auth (${o.SDK_VERSION}): ${e}`,...r)}function m(e,...r){throw b(e,...r)}function g(e,...r){return b(e,...r)}function v(e,r,n){let i={...d(),[r]:n};return new l.ErrorFactory("auth","Firebase",i).create(r,{appName:e.name})}function y(e){return v(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b(e,...r){if("string"!=typeof e){let n=r[0],i=[...r.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return h.create(e,...r)}function _(e,r,...n){if(!e)throw b(r,...n)}function w(e){let r="INTERNAL ASSERTION FAILED: "+e;throw p(r),Error(r)}function x(){return"undefined"!=typeof self&&self.location?.href||""}function E(){return"undefined"!=typeof self&&self.location?.protocol||null}class I{constructor(e,r){var n;this.shortDelay=e,this.longDelay=r,n="Short delay should be less than long delay!",r>e||w(n),this.isMobile=(0,l.isMobileCordova)()||(0,l.isReactNative)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===E()||"https:"===E()||(0,l.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function A(e,r){var n,i;n=e.emulator,i="Emulator should always be set here",n||w(i);let{url:s}=e.emulator;return r?`${s}${r.startsWith("/")?r.slice(1):r}`:s}class T{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N=new I(3e4,6e4);function S(e,r){return e.tenantId&&!r.tenantId?{...r,tenantId:e.tenantId}:r}async function C(e,r,n,i,s={}){return P(e,s,async()=>{let s={},a={};i&&("GET"===r?a=i:s={body:JSON.stringify(i)});let o=(0,l.querystring)({key:e.config.apiKey,...a}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);let u={method:r,headers:c,...s};return(0,l.isCloudflareWorker)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,l.isCloudWorkstation)(e.emulatorConfig.host)&&(u.credentials="include"),T.fetch()(await O(e,e.config.apiHost,n,o),u)})}async function P(e,r,n){e._canInitEmulator=!1;let i={...k,...r};try{let r=new L(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();let a=await s.json();if("needConfirmation"in a)throw M(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let[r,n]=(s.ok?a.errorMessage:a.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw M(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===r)throw M(e,"email-already-in-use",a);if("USER_DISABLED"===r)throw M(e,"user-disabled",a);let o=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(n)throw v(e,o,n);m(e,o)}}catch(r){if(r instanceof l.FirebaseError)throw r;m(e,"network-request-failed",{message:String(r)})}}async function U(e,r,n,i,s={}){let a=await C(e,r,n,i,s);return"mfaPendingCredential"in a&&m(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function O(e,r,n,i){let s=`${r}${n}?${i}`,a=e.config.emulator?A(e.config,s):`${e.config.apiScheme}://${s}`;return R.includes(n)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(a).toString():a}class L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(g(this.auth,"network-request-failed")),N.get())})}}function M(e,r,n){let i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let s=g(e,r,i);return s.customData._tokenResponse=n,s}function F(e){return void 0!==e&&void 0!==e.enterprise}class j{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)switch(r.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D(e,r){return C(e,"GET","/v2/recaptchaConfig",S(e,r))}async function B(e,r){return C(e,"POST","/v1/accounts:delete",r)}async function z(e,r){return C(e,"POST","/v1/accounts:lookup",r)}function V(e){if(e)try{let r=new Date(Number(e));if(!isNaN(r.getTime()))return r.toUTCString()}catch(e){}}async function H(e,r=!1){let n=(0,l.getModularInstance)(e),i=await n.getIdToken(r),s=q(i);_(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");let a="object"==typeof s.firebase?s.firebase:void 0,o=a?.sign_in_provider;return{claims:s,token:i,authTime:V(W(s.auth_time)),issuedAtTime:V(W(s.iat)),expirationTime:V(W(s.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function W(e){return 1e3*Number(e)}function q(e){let[r,n,i]=e.split(".");if(void 0===r||void 0===n||void 0===i)return p("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,l.base64Decode)(n);if(!e)return p("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return p("Caught error parsing JWT payload as JSON",e?.toString()),null}}function $(e){let r=q(e);return _(r,"internal-error"),_(void 0!==r.exp,"internal-error"),_(void 0!==r.iat,"internal-error"),Number(r.exp)-Number(r.iat)}async function K(e,r,n=!1){if(n)return r;try{return await r}catch(r){throw r instanceof l.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class G{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(!e)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Q{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function J(e){var r,n;let i=e.auth,s=await e.getIdToken(),a=await K(e,z(i,{idToken:s}));_(a?.users.length,i,"internal-error");let o=a.users[0];e._notifyReloadListener(o);let l=o.providerUserInfo?.length?X(o.providerUserInfo):[],c=(r=e.providerData,n=l,[...r.filter(e=>!n.some(r=>r.providerId===e.providerId)),...n]),u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!c?.length;Object.assign(e,{uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Q(o.createdAt,o.lastLoginAt),isAnonymous:!!u&&d})}async function Z(e){let r=(0,l.getModularInstance)(e);await J(r),await r.auth._persistUserIfCurrent(r),r.auth._notifyListenersIfCurrent(r)}function X(e){return e.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function Y(e,r){let n=await P(e,{},async()=>{let n=(0,l.querystring)({grant_type:"refresh_token",refresh_token:r}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,a=await O(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,l.isCloudWorkstation)(e.emulatorConfig.host)&&(c.credentials="include"),T.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ee(e,r){return C(e,"POST","/v2/accounts:revokeToken",S(e,r))}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_(void 0!==e.idToken,"internal-error"),_(void 0!==e.refreshToken,"internal-error");let r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){_(0!==e.length,"internal-error");let r=$(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return r||!this.accessToken||this.isExpired?(_(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){let{accessToken:n,refreshToken:i,expiresIn:s}=await Y(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,r){let{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new et;return n&&(_("string"==typeof n,"internal-error",{appName:e}),a.refreshToken=n),i&&(_("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),s&&(_("number"==typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return w("not implemented")}}function er(e,r){_("string"==typeof e||void 0===e,"internal-error",{appName:r})}class en{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new G(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Q(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let r=await K(this,this.stsTokenManager.getToken(this.auth,e));return _(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return H(this,e)}reload(){return Z(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let r=new en({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await J(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,o._isFirebaseServerApp)(this.auth.app))return Promise.reject(y(this.auth));let e=await this.getIdToken();return await K(this,B(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){let n=r.displayName??void 0,i=r.email??void 0,s=r.phoneNumber??void 0,a=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,c=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:p,stsTokenManager:m}=r;_(d&&m,e,"internal-error");let g=et.fromJSON(this.name,m);_("string"==typeof d,e,"internal-error"),er(n,e.name),er(i,e.name),_("boolean"==typeof h,e,"internal-error"),_("boolean"==typeof f,e,"internal-error"),er(s,e.name),er(a,e.name),er(o,e.name),er(l,e.name),er(c,e.name),er(u,e.name);let v=new en({uid:d,auth:e,email:i,emailVerified:h,displayName:n,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:g,createdAt:c,lastLoginAt:u});return p&&Array.isArray(p)&&(v.providerData=p.map(e=>({...e}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,r,n=!1){let i=new et;i.updateFromServerResponse(r);let s=new en({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await J(s),s}static async _fromGetAccountInfoResponse(e,r,n){let i=r.users[0];_(void 0!==i.localId,"internal-error");let s=void 0!==i.providerUserInfo?X(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new et;o.updateFromIdToken(n);let l=new en({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a});return Object.assign(l,{uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Q(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length}),l}}let ei=new Map;function es(e){var r,n;r="Expected a class definition",e instanceof Function||w(r);let i=ei.get(e);return i?(n="Instance stored in cache mismatched with class",i instanceof e||w(n)):(i=new e,ei.set(e,i)),i}class ea{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){let r=this.storage[e];return void 0===r?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}function eo(e,r,n){return`firebase:${e}:${r}:${n}`}ea.type="NONE";class el{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=eo(this.userKey,i.apiKey,s),this.fullPersistenceKey=eo("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let r=await z(this.auth,{idToken:e}).catch(()=>void 0);return r?en._fromGetAccountInfoResponse(this.auth,r,e):null}return en._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new el(es(ea),e,n);let i=(await Promise.all(r.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),s=i[0]||es(ea),a=eo(n,e.config.apiKey,e.name),o=null;for(let n of r)try{let r=await n._get(a);if(r){let i;if("string"==typeof r){let n=await z(e,{idToken:r}).catch(()=>void 0);if(!n)break;i=await en._fromGetAccountInfoResponse(e,n,r)}else i=en._fromJSON(e,r);n!==s&&(o=i),s=n;break}}catch{}let l=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&l.length&&(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(r.map(async e=>{if(e!==s)try{await e._remove(a)}catch{}}))),new el(s,e,n)}}function ec(e){let r=e.toLowerCase();if(r.includes("opera/")||r.includes("opr/")||r.includes("opios/"))return"Opera";{if(ef(r))return"IEMobile";if(r.includes("msie")||r.includes("trident/"))return"IE";if(r.includes("edge/"))return"Edge";if(eu(r))return"Firefox";if(r.includes("silk/"))return"Silk";if(em(r))return"Blackberry";if(eg(r))return"Webos";if(ed(r))return"Safari";if((r.includes("chrome/")||eh(r))&&!r.includes("edge/"))return"Chrome";if(ep(r))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(n?.length===2)return n[1]}return"Other"}function eu(e=(0,l.getUA)()){return/firefox\//i.test(e)}function ed(e=(0,l.getUA)()){let r=e.toLowerCase();return r.includes("safari/")&&!r.includes("chrome/")&&!r.includes("crios/")&&!r.includes("android")}function eh(e=(0,l.getUA)()){return/crios\//i.test(e)}function ef(e=(0,l.getUA)()){return/iemobile/i.test(e)}function ep(e=(0,l.getUA)()){return/android/i.test(e)}function em(e=(0,l.getUA)()){return/blackberry/i.test(e)}function eg(e=(0,l.getUA)()){return/webos/i.test(e)}function ev(e=(0,l.getUA)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ey(e=(0,l.getUA)()){return ev(e)||ep(e)||eg(e)||em(e)||/windows phone/i.test(e)||ef(e)}function eb(e,r=[]){let n;switch(e){case"Browser":n=ec((0,l.getUA)());break;case"Worker":n=`${ec((0,l.getUA)())}-${e}`;break;default:n=e}let i=r.length?r.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${i}`}class e_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){let n=r=>new Promise((n,i)=>{try{let i=e(r);n(i)}catch(e){i(e)}});n.onAbort=r,this.queue.push(n);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let r=[];try{for(let n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(e){for(let e of(r.reverse(),r))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}async function ew(e,r={}){return C(e,"GET","/v2/passwordPolicy",S(e,r))}class ex{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??6,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),void 0!==r.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),void 0!==r.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),void 0!==r.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),void 0!==r.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){let n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){let n;this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class eE{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eA(this),this.idTokenSubscription=new eA(this),this.beforeStateQueue=new e_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=es(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await el.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let r=await z(this,{idToken:e}),n=await en._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,o._isFirebaseServerApp)(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(r=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(r,r))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=this.redirectUser?._redirectEventId,s=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&a?.user&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await J(e)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,o._isFirebaseServerApp)(this.app))return Promise.reject(y(this));let r=e?(0,l.getModularInstance)(e):null;return r&&_(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,o._isFirebaseServerApp)(this.app)?Promise.reject(y(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,o._isFirebaseServerApp)(this.app)?Promise.reject(y(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ex(await ew(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new l.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){let r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(r.tenantId=this.tenantId),await ee(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){let n=await this.getOrInitRedirectPersistenceManager(r);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let r=e&&es(e)||this._popupRedirectResolver;_(r,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[es(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e)?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};let s="function"==typeof r?r:r.next.bind(r),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),"function"==typeof r){let s=e.addObserver(r,n,i);return()=>{a=!0,s()}}{let n=e.addObserver(r);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if((0,o._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&function(e,...r){f.logLevel<=c.LogLevel.WARN&&f.warn(`Auth (${o.SDK_VERSION}): ${e}`,...r)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eI(e){return(0,l.getModularInstance)(e)}class eA{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,l.createSubscribe)(e=>this.observer=e)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eT={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ek(e){return`__${e}${Math.floor(1e6*Math.random())}`}class eR{constructor(){this.enterprise=new eN}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class eN{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}let eS="NO_RECAPTCHA";class eC{constructor(e){this.type="recaptcha-enterprise",this.auth=eI(e)}async verify(e="verify",r=!1){async function n(e){if(!r){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(r,n)=>{D(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0===i.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new j(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,r(n.siteKey)}}).catch(e=>{n(e)})})}function i(r,n,i){let s=window.grecaptcha;F(s)?s.enterprise.ready(()=>{s.enterprise.execute(r,{action:e}).then(e=>{n(e)}).catch(()=>{n(eS)})}):i(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eR().execute("siteKey",{action:"verify"}):new Promise((e,s)=>{n(this.auth).then(n=>{if(!r&&F(window.grecaptcha))i(n,e,s);else{var a;if("undefined"==typeof window)return void s(Error("RecaptchaVerifier is only supported in browser"));let r=eT.recaptchaEnterpriseScript;0!==r.length&&(r+=n),(a=r,eT.loadJS(a)).then(()=>{i(n,e,s)}).catch(e=>{s(e)})}}).catch(e=>{s(e)})})}}async function eP(e,r,n,i=!1,s=!1){let a,o=new eC(e);if(s)a=eS;else try{a=await o.verify(n)}catch(e){a=await o.verify(n,!0)}let l={...r};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){let e=l.phoneEnrollmentInfo.phoneNumber,r=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function eU(e,r,n,i,s){if("EMAIL_PASSWORD_PROVIDER"===s)if(!e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return i(e,r).catch(async s=>{if("auth/missing-recaptcha-token"!==s.code)return Promise.reject(s);{console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await eP(e,r,n,"getOobCode"===n);return i(e,s)}});else{let s=await eP(e,r,n,"getOobCode"===n);return i(e,s)}if("PHONE_PROVIDER"!==s)return Promise.reject(s+" provider is not supported.");if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=await eP(e,r,n);return i(e,s).catch(async s=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let s=await eP(e,r,n,!1,!0);return i(e,s)}return Promise.reject(s)})}{let s=await eP(e,r,n,!1,!0);return i(e,s)}}async function eO(e){let r=eI(e),n=new j(await D(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==r.tenantId?r._agentRecaptchaConfig=n:r._tenantRecaptchaConfigs[r.tenantId]=n,n.isAnyProviderEnabled()&&new eC(r).verify()}function eL(e){let r=e.indexOf(":");return r<0?"":e.substr(0,r+1)}function eM(e){if(!e)return null;let r=Number(e);return isNaN(r)?null:r}class eF{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,r){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}async function ej(e,r){return C(e,"POST","/v1/accounts:signUp",r)}async function eD(e,r){return U(e,"POST","/v1/accounts:signInWithPassword",S(e,r))}async function eB(e,r){return U(e,"POST","/v1/accounts:signInWithEmailLink",S(e,r))}async function ez(e,r){return U(e,"POST","/v1/accounts:signInWithEmailLink",S(e,r))}class eV extends eF{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new eV(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new eV(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let r="string"==typeof e?JSON.parse(e):e;if(r?.email&&r?.password){if("password"===r.signInMethod)return this._fromEmailAndPassword(r.email,r.password);else if("emailLink"===r.signInMethod)return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eU(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eB(e,{email:this._email,oobCode:this._password});default:m(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":return eU(e,{idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ej,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ez(e,{idToken:r,email:this._email,oobCode:this._password});default:m(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eH(e,r){return U(e,"POST","/v1/accounts:signInWithIdp",S(e,r))}class eW extends eF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let r=new eW(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):m("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let{providerId:r,signInMethod:n,...i}="string"==typeof e?JSON.parse(e):e;if(!r||!n)return null;let s=new eW(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return eH(e,this.buildRequest())}_linkToIdToken(e,r){let n=this.buildRequest();return n.idToken=r,eH(e,n)}_getReauthenticationResolver(e){let r=this.buildRequest();return r.autoCreate=!1,eH(e,r)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=(0,l.querystring)(r)}return e}}async function eq(e,r){return C(e,"POST","/v1/accounts:sendVerificationCode",S(e,r))}async function e$(e,r){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",S(e,r))}async function eK(e,r){let n=await U(e,"POST","/v1/accounts:signInWithPhoneNumber",S(e,r));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}let eG={USER_NOT_FOUND:"user-not-found"};async function eQ(e,r){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",S(e,{...r,operation:"REAUTH"}),eG)}class eJ extends eF{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,r){return new eJ({verificationId:e,verificationCode:r})}static _fromTokenResponse(e,r){return new eJ({phoneNumber:e,temporaryProof:r})}_getIdTokenResponse(e){return e$(e,this._makeVerificationRequest())}_linkToIdToken(e,r){return eK(e,{idToken:r,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return eQ(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:r,verificationId:n,verificationCode:i}=this.params;return e&&r?{temporaryProof:e,phoneNumber:r}:{sessionInfo:n,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:r,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||r||i||s?new eJ({verificationId:r,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class eZ{constructor(e){const r=(0,l.querystringDecode)((0,l.extractQuerystring)(e)),n=r.apiKey??null,i=r.oobCode??null,s=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(r.mode??null);_(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){let r,n,i,s=(n=(r=(0,l.querystringDecode)((0,l.extractQuerystring)(e)).link)?(0,l.querystringDecode)((0,l.extractQuerystring)(r)).deep_link_id:null,((i=(0,l.querystringDecode)((0,l.extractQuerystring)(e)).deep_link_id)?(0,l.querystringDecode)((0,l.extractQuerystring)(i)).link:null)||i||n||r||e);try{return new eZ(s)}catch{return null}}}class eX{constructor(){this.providerId=eX.PROVIDER_ID}static credential(e,r){return eV._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){let n=eZ.parseLink(r);return _(n,"argument-error"),eV._fromEmailAndCode(e,n.code,n.tenantId)}}eX.PROVIDER_ID="password",eX.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eX.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class eY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class e0 extends eY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class e1 extends e0{constructor(){super("facebook.com")}static credential(e){return eW._fromParams({providerId:e1.PROVIDER_ID,signInMethod:e1.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e1.credentialFromTaggedObject(e)}static credentialFromError(e){return e1.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e1.credential(e.oauthAccessToken)}catch{return null}}}e1.FACEBOOK_SIGN_IN_METHOD="facebook.com",e1.PROVIDER_ID="facebook.com";class e2 extends e0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return eW._fromParams({providerId:e2.PROVIDER_ID,signInMethod:e2.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return e2.credentialFromTaggedObject(e)}static credentialFromError(e){return e2.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return e2.credential(r,n)}catch{return null}}}e2.GOOGLE_SIGN_IN_METHOD="google.com",e2.PROVIDER_ID="google.com";class e3 extends e0{constructor(){super("github.com")}static credential(e){return eW._fromParams({providerId:e3.PROVIDER_ID,signInMethod:e3.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e3.credentialFromTaggedObject(e)}static credentialFromError(e){return e3.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e3.credential(e.oauthAccessToken)}catch{return null}}}e3.GITHUB_SIGN_IN_METHOD="github.com",e3.PROVIDER_ID="github.com";class e4 extends e0{constructor(){super("twitter.com")}static credential(e,r){return eW._fromParams({providerId:e4.PROVIDER_ID,signInMethod:e4.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return e4.credentialFromTaggedObject(e)}static credentialFromError(e){return e4.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return e4.credential(r,n)}catch{return null}}}async function e5(e,r){return U(e,"POST","/v1/accounts:signUp",S(e,r))}e4.TWITTER_SIGN_IN_METHOD="twitter.com",e4.PROVIDER_ID="twitter.com";class e8{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){return new e8({user:await en._fromIdTokenResponse(e,n,i),providerId:e6(n),_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){return await e._updateTokensIfNecessary(n,!0),new e8({user:e,providerId:e6(n),_tokenResponse:n,operationType:r})}}function e6(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class e7 extends l.FirebaseError{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,e7.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new e7(e,r,n,i)}}function e9(e,r,n,i){return("reauthenticate"===r?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw e7._fromErrorAndOperation(e,n,r,i);throw n})}async function te(e,r,n=!1){let i=await K(e,r._linkToIdToken(e.auth,await e.getIdToken()),n);return e8._forOperation(e,"link",i)}async function tt(e,r,n=!1){let{auth:i}=e;if((0,o._isFirebaseServerApp)(i.app))return Promise.reject(y(i));let s="reauthenticate";try{let a=await K(e,e9(i,s,r,e),n);_(a.idToken,i,"internal-error");let o=q(a.idToken);_(o,i,"internal-error");let{sub:l}=o;return _(e.uid===l,i,"user-mismatch"),e8._forOperation(e,s,a)}catch(e){throw e?.code==="auth/user-not-found"&&m(i,"user-mismatch"),e}}async function tr(e,r,n=!1){if((0,o._isFirebaseServerApp)(e.app))return Promise.reject(y(e));let i="signIn",s=await e9(e,i,r),a=await e8._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(a.user),a}async function tn(e,r){return tr(eI(e),r)}class ti{constructor(e,r){this.factorId=e,this.uid=r.mfaEnrollmentId,this.enrollmentTime=new Date(r.enrolledAt).toUTCString(),this.displayName=r.displayName}static _fromServerResponse(e,r){return"phoneInfo"in r?ts._fromServerResponse(e,r):"totpInfo"in r?ta._fromServerResponse(e,r):m(e,"internal-error")}}class ts extends ti{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,r){return new ts(r)}}class ta extends ti{constructor(e){super("totp",e)}static _fromServerResponse(e,r){return new ta(r)}}async function to(e){let r=eI(e);r._getPasswordPolicyInternal()&&await r._updatePasswordPolicy()}async function tl(e,r,n){if((0,o._isFirebaseServerApp)(e.app))return Promise.reject(y(e));let i=eI(e),s=eU(i,{returnSecureToken:!0,email:r,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e5,"EMAIL_PASSWORD_PROVIDER"),a=await s.catch(r=>{throw"auth/password-does-not-meet-requirements"===r.code&&to(e),r}),l=await e8._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function tc(e,r,n){return(0,o._isFirebaseServerApp)(e.app)?Promise.reject(y(e)):tn((0,l.getModularInstance)(e),eX.credential(r,n)).catch(async r=>{throw"auth/password-does-not-meet-requirements"===r.code&&to(e),r})}async function tu(e,r){return C(e,"POST","/v1/accounts:update",r)}async function td(e,{displayName:r,photoURL:n}){if(void 0===r&&void 0===n)return;let i=(0,l.getModularInstance)(e),s=await i.getIdToken(),a=await K(i,tu(i.auth,{idToken:s,displayName:r,photoUrl:n,returnSecureToken:!0}));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;let o=i.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function th(e,r,n,i){return(0,l.getModularInstance)(e).onAuthStateChanged(r,n,i)}function tf(e){return(0,l.getModularInstance)(e).signOut()}function tp(e,r){return C(e,"POST","/v2/accounts/mfaEnrollment:start",S(e,r))}new WeakMap;let tm="__sak";class tg{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(tm,"1"),this.storage.removeItem(tm),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){let r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class tv extends tg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ey(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let r of Object.keys(this.listeners)){let n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key)return void this.forAllChangedKeys((e,r,n)=>{this.notifyListeners(e,n)});let n=e.key;r?this.detachListener():this.stopPolling();let i=()=>{let e=this.storage.getItem(n);(r||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,l.isIE)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,r){this.localCache[e]=r;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(r?JSON.parse(r):r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){let r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}tv.type="LOCAL";class ty extends tg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}ty.type="SESSION";class tb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let r=this.receivers.find(r=>r.isListeningto(e));if(r)return r;let n=new tb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:r,eventType:n,data:i}=e.data,s=this.handlersMap[n];if(!s?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:n});let a=Array.from(s).map(async r=>r(e.origin,i)),o=await Promise.all(a.map(async e=>{try{let r=await e;return{fulfilled:!0,value:r}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:o})}_subscribe(e,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),r&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function t_(e="",r=10){let n="";for(let e=0;e<r;e++)n+=Math.floor(10*Math.random());return e+n}tb.receivers=[];class tw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){let i,s,a="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!a)throw Error("connection_unavailable");return new Promise((o,l)=>{let c=t_("",20);a.port1.start();let u=setTimeout(()=>{l(Error("unsupported_event"))},n);s={messageChannel:a,onMessage(e){if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(u),clearTimeout(i),l(Error("invalid_response"))}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function tx(){return window}function tE(){return void 0!==tx().WorkerGlobalScope&&"function"==typeof tx().importScripts}async function tI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let tA="firebaseLocalStorageDb",tT="firebaseLocalStorage",tk="fbase_key";class tR{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function tN(e,r){return e.transaction([tT],r?"readwrite":"readonly").objectStore(tT)}function tS(){let e=indexedDB.open(tA,1);return new Promise((r,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(tT,{keyPath:tk})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(tT)?r(n):(n.close(),await new tR(indexedDB.deleteDatabase(tA)).toPromise(),r(await tS()))})})}async function tC(e,r,n){return new tR(tN(e,!0).put({[tk]:r,value:n})).toPromise()}async function tP(e,r){let n=tN(e,!1).get(r),i=await new tR(n).toPromise();return void 0===i?null:i.value}function tU(e,r){return new tR(tN(e,!0).delete(r)).toPromise()}class tO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await tS()),this.db}async _withRetries(e){let r=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(e){if(r++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tb._getInstance(tE()?self:null),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tI(),!this.activeServiceWorker)return;this.sender=new tw(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await tS();return await tC(e,tm,"1"),await tU(e,tm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>tC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){let r=await this._withRetries(r=>tP(r,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>tU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new tR(tN(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let r=[],n=new Set;if(0!==e.length)for(let{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),r.push(e));return r}notifyListeners(e,r){this.localCache[e]=r;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function tL(e,r){return C(e,"POST","/v2/accounts/mfaSignIn:start",S(e,r))}tO.type="LOCAL",ek("rcb"),new I(3e4,6e4);let tM="recaptcha";async function tF(e,r,n){if(!e._getRecaptchaConfig())try{await eO(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"==typeof r?{phoneNumber:r}:r,"session"in i){let r=i.session;if("phoneNumber"in i){_("enroll"===r.type,e,"internal-error");let s={idToken:r.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=async(e,r)=>{if(r.phoneEnrollmentInfo.captchaResponse===eS){_(n?.type===tM,e,"argument-error");let i=await tj(e,r,n);return tp(e,i)}return tp(e,r)},o=eU(e,s,"mfaSmsEnrollment",a,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{_("signin"===r.type,e,"internal-error");let s=i.multiFactorHint?.uid||i.multiFactorUid;_(s,e,"missing-multi-factor-info");let a={mfaPendingCredential:r.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=async(e,r)=>{if(r.phoneSignInInfo.captchaResponse===eS){_(n?.type===tM,e,"argument-error");let i=await tj(e,r,n);return tL(e,i)}return tL(e,r)},l=eU(e,a,"mfaSmsSignIn",o,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let r={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},s=async(e,r)=>{if(r.captchaResponse===eS){_(n?.type===tM,e,"argument-error");let i=await tj(e,r,n);return eq(e,i)}return eq(e,r)},a=eU(e,r,"sendVerificationCode",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function tj(e,r,n){_(n.type===tM,e,"argument-error");let i=await n.verify();_("string"==typeof i,e,"argument-error");let s={...r};if("phoneEnrollmentInfo"in s){let e=s.phoneEnrollmentInfo.phoneNumber,r=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,a=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:r,clientType:n,recaptchaVersion:a}}),s}if(!("phoneSignInInfo"in s))return Object.assign(s,{recaptchaToken:i}),s;{let e=s.phoneSignInInfo.captchaResponse,r=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:r,recaptchaVersion:n}}),s}}class tD{constructor(e){this.providerId=tD.PROVIDER_ID,this.auth=eI(e)}verifyPhoneNumber(e,r){return tF(this.auth,e,(0,l.getModularInstance)(r))}static credential(e,r){return eJ._fromVerification(e,r)}static credentialFromResult(e){return tD.credentialFromTaggedObject(e)}static credentialFromError(e){return tD.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:r,temporaryProof:n}=e;return r&&n?eJ._fromTokenResponse(r,n):null}}tD.PROVIDER_ID="phone",tD.PHONE_SIGN_IN_METHOD="phone";class tB extends eF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eH(e,this._buildIdpRequest())}_linkToIdToken(e,r){return eH(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return eH(e,this._buildIdpRequest())}_buildIdpRequest(e){let r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function tz(e){return tr(e.auth,new tB(e),e.bypassAuthState)}function tV(e){let{auth:r,user:n}=e;return _(n,r,"internal-error"),tt(n,new tB(e),e.bypassAuthState)}async function tH(e){let{auth:r,user:n}=e;return _(n,r,"internal-error"),te(n,new tB(e),e.bypassAuthState)}class tW{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a)return void this.reject(a);let l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tz;case"linkViaPopup":case"linkViaRedirect":return tH;case"reauthViaPopup":case"reauthViaRedirect":return tV;default:m(this.auth,"internal-error")}}resolve(e){var r,n;r=this.pendingPromise,n="Pending promise was never set",r||w(n),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var r,n;r=this.pendingPromise,n="Pending promise was never set",r||w(n),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let tq=new I(2e3,1e4);class t$ extends tW{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,t$.currentPopupAction&&t$.currentPopupAction.cancel(),t$.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return _(e,this.auth,"internal-error"),e}async onExecution(){var e,r;e=1===this.filter.length,r="Popup operations only handle one event",e||w(r);let n=t_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(g(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t$.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tq.get())};e()}}t$.currentPopupAction=null;let tK=new Map;class tG extends tW{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=tK.get(this.auth._key());if(!e){try{let r=await tQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(r){e=()=>Promise.reject(r)}tK.set(this.auth._key(),e)}return this.bypassAuthState||tK.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tQ(e,r){var n;let i=eo("pendingRedirect",(n=r).config.apiKey,n.name),s=es(e._redirectPersistence);if(!await s._isAvailable())return!1;let a=await s._get(i)==="true";return await s._remove(i),a}function tJ(e,r){tK.set(e._key(),r)}async function tZ(e,r,n=!1){if((0,o._isFirebaseServerApp)(e.app))return Promise.reject(y(e));let i=eI(e),s=r?es(r):(_(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver),a=new tG(i,s,n),l=await a.execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,r)),l}class tX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t0(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!t0(e)){let n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(g(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){let n=null===r.eventId||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tY(e))}saveEventToCache(e){this.cachedEventUids.add(tY(e)),this.lastProcessedEventTime=Date.now()}}function tY(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function t0({type:e,error:r}){return"unknown"===e&&r?.code==="auth/no-auth-event"}async function t1(e,r={}){return C(e,"GET","/v1/projects",r)}let t2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t3=/^https?/;async function t4(e){if(e.config.emulator)return;let{authorizedDomains:r}=await t1(e);for(let e of r)try{if(function(e){let r=x(),{protocol:n,hostname:i}=new URL(r);if(e.startsWith("chrome-extension://")){let s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===r.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!t3.test(n))return!1;if(t2.test(e))return i===e;let s=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}(e))return}catch{}m(e,"unauthorized-domain")}let t5=new I(3e4,6e4);function t8(){let e=tx().___jsl;if(e?.H){for(let r of Object.keys(e.H))if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=[...e.H[r].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}let t6=null,t7=new I(5e3,15e3),t9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},re=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rt(e){let r,n,i,s,a,c=await (t6=t6||new Promise((r,n)=>{function i(){t8(),gapi.load("gapi.iframes",{callback:()=>{r(gapi.iframes.getContext())},ontimeout:()=>{t8(),n(g(e,"network-request-failed"))},timeout:t5.get()})}if(tx().gapi?.iframes?.Iframe)r(gapi.iframes.getContext());else if(tx().gapi?.load)i();else{var s;let r=ek("iframefcb");return tx()[r]=()=>{gapi.load?i():n(g(e,"network-request-failed"))},(s=`${eT.gapiScript}?onload=${r}`,eT.loadJS(s)).catch(e=>n(e))}}).catch(e=>{throw t6=null,e})),u=tx().gapi;return _(u,e,"internal-error"),c.open({where:document.body,url:(_((r=e.config).authDomain,e,"auth-domain-config-required"),n=r.emulator?A(r,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:r.apiKey,appName:e.name,v:o.SDK_VERSION},(s=re.get(e.config.apiHost))&&(i.eid=s),(a=e._getFrameworks()).length&&(i.fw=a.join(",")),`${n}?${(0,l.querystring)(i).slice(1)}`),messageHandlersFilter:u.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t9,dontclear:!0},r=>new Promise(async(n,i)=>{await r.restyle({setHideOnLeave:!1});let s=g(e,"network-request-failed"),a=tx().setTimeout(()=>{i(s)},t7.get());function o(){tx().clearTimeout(a),n(r)}r.ping(o).then(o,()=>{i(s)})}))}let rr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let ri=encodeURIComponent("fac");async function rs(e,r,n,i,s,a){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");let c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:o.SDK_VERSION,eventId:s};if(r instanceof eY)for(let[n,i]of(r.setDefaultLanguage(e.languageCode),c.providerId=r.providerId||"",(0,l.isEmpty)(r.getCustomParameters())||(c.customParameters=JSON.stringify(r.getCustomParameters())),Object.entries(a||{})))c[n]=i;if(r instanceof e0){let e=r.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}for(let r of(e.tenantId&&(c.tid=e.tenantId),Object.keys(c)))void 0===c[r]&&delete c[r];let u=await e._getAppCheckToken(),d=u?`#${ri}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,l.querystring)(c).slice(1)}${d}`}let ra="webStorageSupport",ro=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ty,this._completeRedirectFn=tZ,this._overrideRedirectResult=tJ}async _openPopup(e,r,n,i){var s,a;s=this.eventManagers[e._key()]?.manager,a="_initialize() not called before _openPopup()",s||w(a);let o=await rs(e,r,n,x(),i);return function(e,r,n,i=500,s=600){let a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u={...rr,width:i.toString(),height:s.toString(),top:a,left:o},d=(0,l.getUA)().toLowerCase();n&&(c=eh(d)?"_blank":n),eu(d)&&(r=r||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[r,n])=>`${e}${r}=${n},`,"");if(function(e=(0,l.getUA)()){return ev(e)&&!!window.navigator?.standalone}(d)&&"_self"!==c){var f,p;let e,n;return f=r||"",p=c,(e=document.createElement("a")).href=f,e.target=p,(n=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n),new rn(null)}let m=window.open(r||"",c,h);_(m,e,"popup-blocked");try{m.focus()}catch(e){}return new rn(m)}(e,o,t_())}async _openRedirect(e,r,n,i){var s;return await this._originValidation(e),s=await rs(e,r,n,x(),i),tx().location.href=s,new Promise(()=>{})}_initialize(e){let r=e._key();if(this.eventManagers[r]){var n;let{manager:e,promise:i}=this.eventManagers[r];return e?Promise.resolve(e):(n="If manager is not set, promise should be",i||w(n),i)}let i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){let r=await rt(e),n=new tX(e);return r.register("authEvent",r=>(_(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ra,{type:ra},n=>{let i=n?.[0]?.[ra];void 0!==i&&r(!!i),m(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=t4(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return ey()||ed()||ev()}};var rl="@firebase/auth",rc="1.12.0";class ru{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let r=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let rd=(0,l.getExperimentalSetting)("authIdTokenMaxAge")||300,rh=null;function rf(e=(0,o.getApp)()){let r=(0,o._getProvider)(e,"auth");if(r.isInitialized())return r.getImmediate();let n=function(e,r){let n=(0,o._getProvider)(e,"auth");if(n.isInitialized()){let e=n.getImmediate(),i=n.getOptions();if((0,l.deepEqual)(i,r??{}))return e;m(e,"already-initialized")}return n.initialize({options:r})}(e,{popupRedirectResolver:ro,persistence:[tO,tv,ty]}),i=(0,l.getExperimentalSetting)("authTokenSyncURL");if(i&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(i,location.origin);if(location.origin===e.origin){let r,i=(r=e.toString(),async e=>{let n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>rd)return;let s=n?.token;rh!==s&&(rh=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});(0,l.getModularInstance)(n).beforeAuthStateChanged(i,()=>i(n.currentUser)),(0,l.getModularInstance)(n).onIdTokenChanged(e=>i(e),void 0,void 0)}}let s=(0,l.getDefaultEmulatorHost)("auth");return s&&function(e,r,n){let i=eI(e);_(/^https?:\/\//.test(r),i,"invalid-emulator-scheme");let s=eL(r),{host:a,port:o}=function(e){let r=eL(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(r.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let e=s[1];return{host:e,port:eM(i.substr(e.length+1))}}{let[e,r]=i.split(":");return{host:e,port:eM(r)}}}(r),c=null===o?"":`:${o}`,u={url:`${s}//${a}${c}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!i._canInitEmulator){_(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_((0,l.deepEqual)(u,i.config.emulator)&&(0,l.deepEqual)(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,(0,l.isCloudWorkstation)(a)?((0,l.pingServer)(`${s}//${a}${c}`),(0,l.updateEmulatorBanner)("Auth",!0)):function(){function e(){let e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}eT={loadJS:e=>new Promise((r,n)=>{let i=document.createElement("script");i.setAttribute("src",e),i.onload=r,i.onerror=e=>{let r=g("internal-error");r.customData=e,n(r)},i.type="text/javascript",i.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},r="Browser",(0,o._registerComponent)(new u.Component("auth",(e,{options:n})=>{let i,s,a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=a.options;_(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});let d=new eE(a,o,l,{apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eb(r)});return s=(Array.isArray(i=n?.persistence||[])?i:[i]).map(es),n?.errorMap&&d._updateErrorMap(n.errorMap),d._initializeWithPersistence(s,n?.popupRedirectResolver),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new u.Component("auth-internal",e=>new ru(eI(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)(rl,rc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(r)),(0,o.registerVersion)(rl,rc,"esm2020"),e.s([],58556),e.s([],51718),e.i(58556),e.s(["createUserWithEmailAndPassword",()=>tl,"getAuth",()=>rf,"onAuthStateChanged",()=>th,"signInWithEmailAndPassword",()=>tc,"signOut",()=>tf,"updateProfile",()=>td],18357),e.i(47167),(0,o.registerVersion)("firebase","12.7.0","app");e.i(1465);var rp=e.i(34991),rm=l;let rg="firebasestorage.googleapis.com",rv="storageBucket";class ry extends rm.FirebaseError{constructor(e,r,n=0){super(rb(e),`Firebase Storage: ${r} (${rb(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ry.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function rb(e){return"storage/"+e}function r_(){return new ry(s.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rw(e){return new ry(s.INVALID_ARGUMENT,e)}function rx(){return new ry(s.APP_DELETED,"The Firebase app was deleted.")}function rE(e,r){return new ry(s.INVALID_FORMAT,"String does not match format '"+e+"': "+r)}function rI(e){throw new ry(s.INTERNAL_ERROR,"Internal error: "+e)}(n=s||(s={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class rA{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=rA.makeFromUrl(e,r)}catch(r){return new rA(e,"")}if(""===n.path)return n;throw new ry(s.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}static makeFromUrl(e,r){let n=null,i="([A-Za-z0-9.\\-_]+)",a=RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}let l=r.replace(/[.]/g,"\\."),c=RegExp(`^https?://${l}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),u=r===rg?"(?:storage.googleapis.com|storage.cloud.google.com)":r,d=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:c,indices:{bucket:1,path:3},postModify:o},{regex:RegExp(`^https?://${u}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let r=0;r<d.length;r++){let i=d[r],s=i.regex.exec(e);if(s){let e=s[i.indices.bucket],r=s[i.indices.path];r||(r=""),n=new rA(e,r),i.postModify(n);break}}if(null==n)throw new ry(s.INVALID_URL,"Invalid URL '"+e+"'.");return n}}class rT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rk(e){return"string"==typeof e||e instanceof String}function rR(e){return rN()&&e instanceof Blob}function rN(){return"undefined"!=typeof Blob}function rS(e,r,n,i){if(i<r)throw rw(`Invalid value for '${e}'. Expected ${r} or greater.`);if(i>n)throw rw(`Invalid value for '${e}'. Expected ${n} or less.`)}function rC(e,r,n){let i=r;return null==n&&(i=`https://${r}`),`${n}://${i}/v0${e}`}function rP(e){let r=encodeURIComponent,n="?";for(let i in e)e.hasOwnProperty(i)&&(n=n+(r(i)+"=")+r(e[i])+"&");return n.slice(0,-1)}(i=a||(a={}))[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT";class rU{constructor(e,r,n,i,s,a,o,l,c,u,d,h=!0,f=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,r)=>{this.resolve_=e,this.reject_=r,this.start_()})}start_(){let e=(e,r)=>{if(r)return void e(!1,new rO(!1,null,!0));let n=this.connectionFactory_();this.pendingConnection_=n;let i=e=>{let r=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(r,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{var r;let s,o,l;null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;let c=n.getErrorCode()===a.NO_ERROR,u=n.getStatus();!c||(r=this.additionalRetryCodes_,s=u>=500&&u<600,o=-1!==[408,429].indexOf(u),l=-1!==r.indexOf(u),(s||o||l)&&this.retry)?e(!1,new rO(!1,null,n.getErrorCode()===a.ABORT)):e(!0,new rO(-1!==this.successCodes_.indexOf(u),n))})},r=(e,r)=>{let n=this.resolve_,i=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let e=this.callback_(a,a.getResponse());void 0!==e?n(e):n()}catch(e){i(e)}else if(null!==a){let e=r_();e.serverResponse=a.getErrorText(),i(this.errorCallback_?this.errorCallback_(a,e):e)}else i(r.canceled?this.appDelete_?rx():new ry(s.CANCELED,"User canceled the upload/download."):new ry(s.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?r(!1,new rO(!1,null,!0)):this.backoffId_=function(e,r,n){let i=1,s=null,a=null,o=!1,l=0,c=!1;function u(...e){c||(c=!0,r.apply(null,e))}function d(r){s=setTimeout(()=>{s=null,e(f,2===l)},r)}function h(){a&&clearTimeout(a)}function f(e,...r){let n;if(c)return void h();if(e||2===l||o){h(),u.call(null,e,...r);return}i<64&&(i*=2),1===l?(l=2,n=0):n=(i+Math.random())*1e3,d(n)}let p=!1;function m(e){p||(p=!0,h(),!c&&(null!==s?(e||(l=2),clearTimeout(s),d(0)):e||(l=1)))}return d(0),a=setTimeout(()=>{o=!0,m(!0)},n),m}(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rO{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function rL(...e){let r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==r){let n=new r;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}if(rN())return new Blob(e);throw new ry(s.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}let rM="base64",rF="base64url",rj="data_url";class rD{constructor(e,r){this.data=e,this.contentType=r||null}}function rB(e){let r=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<=127?r.push(i):i<=2047?r.push(192|i>>6,128|63&i):(64512&i)==55296?n<e.length-1&&(64512&e.charCodeAt(n+1))==56320?(i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),r.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):r.push(239,191,189):(64512&i)==56320?r.push(239,191,189):r.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(r)}function rz(e,r){let n;switch(e){case rM:{let n=-1!==r.indexOf("-"),i=-1!==r.indexOf("_");if(n||i)throw rE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case rF:{let n=-1!==r.indexOf("+"),i=-1!==r.indexOf("/");if(n||i)throw rE(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/")}}try{n=function(e){if("undefined"==typeof atob)throw new ry(s.UNSUPPORTED_ENVIRONMENT,"base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(e)}(r)}catch(r){if(r.message.includes("polyfill"))throw r;throw rE(e,"Invalid character found")}let i=new Uint8Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);return i}class rV{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(null===r)throw rE(rj,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;null!=n&&(this.base64=function(e,r){return e.length>=r.length&&e.substring(e.length-r.length)===r}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class rH{constructor(e,r){let n=0,i="";rR(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(!rR(this.data_))return new rH(new Uint8Array(this.data_.buffer,e,r-e),!0);{var n,i,s;let a=(n=this.data_,i=e,s=r,n.webkitSlice?n.webkitSlice(i,s):n.mozSlice?n.mozSlice(i,s):n.slice?n.slice(i,s):null);return null===a?null:new rH(a)}}static getBlob(...e){if(rN()){let r=e.map(e=>e instanceof rH?e.data_:e);return new rH(rL.apply(null,r))}{let r=e.map(e=>rk(e)?function(e,r){return new rD(rB(r))}("raw",e).data:e.data_),n=0;r.forEach(e=>{n+=e.byteLength});let i=new Uint8Array(n),s=0;return r.forEach(e=>{for(let r=0;r<e.length;r++)i[s++]=e[r]}),new rH(i,!0)}}uploadData(){return this.data_}}function rW(e){var r;let n;try{n=JSON.parse(e)}catch(e){return null}return"object"!=typeof(r=n)||Array.isArray(r)?null:n}function rq(e){let r=e.lastIndexOf("/",e.length-2);return -1===r?e:e.slice(r+1)}function r$(e,r){return r}class rK{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||r$}}let rG=null;function rQ(){if(rG)return rG;let e=[];e.push(new rK("bucket")),e.push(new rK("generation")),e.push(new rK("metageneration")),e.push(new rK("name","fullPath",!0));let r=new rK("name");r.xform=function(e,r){return!rk(r)||r.length<2?r:rq(r)},e.push(r);let n=new rK("size");return n.xform=function(e,r){return void 0!==r?Number(r):r},e.push(n),e.push(new rK("timeCreated")),e.push(new rK("updated")),e.push(new rK("md5Hash",null,!0)),e.push(new rK("cacheControl",null,!0)),e.push(new rK("contentDisposition",null,!0)),e.push(new rK("contentEncoding",null,!0)),e.push(new rK("contentLanguage",null,!0)),e.push(new rK("contentType",null,!0)),e.push(new rK("metadata","customMetadata",!0)),rG=e}function rJ(e,r,n){let i=rW(r);return null===i?null:function(e,r,n){let i={};i.type="file";let s=n.length;for(let e=0;e<s;e++){let s=n[e];i[s.local]=s.xform(i,r[s.server])}return Object.defineProperty(i,"ref",{get:function(){let r=new rA(i.bucket,i.fullPath);return e._makeStorageReference(r)}}),i}(e,i,n)}class rZ{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rX(e){if(!e)throw r_()}function rY(e){return function(r,n){var i,a;let o;return 401===r.getStatus()?o=r.getErrorText().includes("Firebase App Check token is invalid")?new ry(s.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ry(s.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?(i=e.bucket,o=new ry(s.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===r.getStatus()?(a=e.path,o=new ry(s.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")):o=n,o.status=r.getStatus(),o.serverResponse=n.serverResponse,o}}class r0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=a.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=a.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=a.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,s){if(this.sent_)throw rI("cannot .send() more than once");if((0,rm.isCloudWorkstation)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),void 0!==s)for(let e in s)s.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,s[e].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return -1}}getResponse(){if(!this.sent_)throw rI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class r1 extends r0{initXhr(){this.xhr_.responseType="text"}}function r2(){return new r1}class r3{constructor(e,r){this._service=e,r instanceof rA?this._location=r:this._location=rA.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new r3(e,r)}get root(){let e=new rA(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rq(this._location.path)}get storage(){return this._service}get parent(){let e=function(e){if(0===e.length)return null;let r=e.lastIndexOf("/");return -1===r?"":e.slice(0,r)}(this._location.path);if(null===e)return null;let r=new rA(this._location.bucket,e);return new r3(this._service,r)}_throwIfRoot(e){if(""===this._location.path)throw new ry(s.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function r4(e,r){let n=r?.[rv];return null==n?null:rA.makeFromBucketSpec(n,e)}class r5{constructor(e,r,n,i,s,a=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=rg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=i?this._bucket=rA.makeFromBucketSpec(i,this._host):this._bucket=r4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=rA.makeFromBucketSpec(this._url,e):this._bucket=r4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rS("time",0,1/0,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rS("time",0,1/0,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let r=await e.getToken();if(null!==r)return r.accessToken}return null}async _getAppCheckToken(){if((0,o._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new r3(this,e)}_makeRequest(e,r,n,i,s=!0){if(this._deleted)return new rT(rx());{let a=function(e,r,n,i,s,a,o=!0,l=!1){let c=rP(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return r&&(d["X-Firebase-GMPID"]=r),null!==n&&n.length>0&&(d.Authorization="Firebase "+n),d["X-Firebase-Storage-Version"]="webjs/"+(a??"AppManager"),null!==i&&(d["X-Firebase-AppCheck"]=i),new rU(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o,l)}(e,this._appId,n,i,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){let[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}let r8="@firebase/storage",r6="0.14.0",r7="storage";function r9(e,r,n){var i;let a;return i=e=(0,rm.getModularInstance)(e),i._throwIfRoot("uploadBytes"),a=function(e,r,n,i,a){let o,l=r.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},u=function(){let e="";for(let r=0;r<2;r++)e+=Math.random().toString().slice(2);return e}();c["Content-Type"]="multipart/related; boundary="+u;let d=((o=Object.assign({},a)).fullPath=r.path,o.size=i.size(),o.contentType||(o.contentType=i&&i.type()||"application/octet-stream"),o),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(e,r){let n={},i=r.length;for(let s=0;s<i;s++){let i=r[s];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}(d,n)+"\r\n--"+u+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",f=rH.getBlob(h,i,"\r\n--"+u+"--");if(null===f)throw new ry(s.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");let p={name:d.fullPath},m=rC(l,e.host,e._protocol),g=e.maxUploadRetryTime,v=new rZ(m,"POST",function(r,i){let s=rJ(e,i,n);return rX(null!==s),s},g);return v.urlParams=p,v.headers=c,v.body=f.uploadData(),v.errorHandler=rY(r),v}(i.storage,i._location,rQ(),new rH(r,!0),n),i.storage.makeRequestWithTokens(a,r2).then(e=>({metadata:e,ref:i}))}function ne(e){var r,n,i,a;let o,l,c,u,d;return(r=e=(0,rm.getModularInstance)(e))._throwIfRoot("getDownloadURL"),n=r.storage,i=r._location,a=rQ(),o=rC(i.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new rZ(o,"GET",function(e,r){let i=rJ(n,r,a);return rX(null!==i),function(e,r,n,i){let s=rW(r);if(null===s||!rk(s.downloadTokens))return null;let a=s.downloadTokens;if(0===a.length)return null;let o=encodeURIComponent;return a.split(",").map(r=>{let s=e.bucket,a=e.fullPath;return rC("/b/"+o(s)+"/o/"+o(a),n,i)+rP({alt:"media",token:r})})[0]}(i,r,n.host,n._protocol)},l),u=rY(i),c.errorHandler=function(e,r){var n;let a=u(e,r);return 404===e.getStatus()&&(n=i.path,a=new ry(s.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),a.serverResponse=r.serverResponse,a},d=c,r.storage.makeRequestWithTokens(d,r2).then(e=>{if(null===e)throw new ry(s.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function nt(e,r){var n=e=(0,rm.getModularInstance)(e);if(!(r&&/^[A-Za-z]+:\/\//.test(r)))return function e(r,n){var i;let a,o,l;if(r instanceof r5){if(null==r._bucket)throw new ry(s.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rv+"' property when initializing the app?");let i=new r3(r,r._bucket);return null!=n?e(i,n):i}if(void 0===n)return r;return i=r._location.path,a=n.split("/").filter(e=>e.length>0).join("/"),o=0===i.length?a:i+"/"+a,l=new rA(r._location.bucket,o),new r3(r.storage,l)}(n,r);if(n instanceof r5)return new r3(n,r);throw rw("To use ref(service, url), the first argument must be a Storage instance.")}function nr(e=(0,o.getApp)(),r){e=(0,rm.getModularInstance)(e);let n=(0,o._getProvider)(e,r7).getImmediate({identifier:r}),i=(0,rm.getDefaultEmulatorHostnameAndPort)("storage");return i&&function(e,r,n,i={}){!function(e,r,n,i={}){e.host=`${r}:${n}`;let s=(0,rm.isCloudWorkstation)(r);s&&((0,rm.pingServer)(`https://${e.host}/b`),(0,rm.updateEmulatorBanner)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";let{mockUserToken:a}=i;a&&(e._overrideAuthToken="string"==typeof a?a:(0,rm.createMockUserToken)(a,e.app.options.projectId))}(e,r,n,i)}(n,...i),n}(0,o._registerComponent)(new u.Component(r7,function(e,{instanceIdentifier:r}){return new r5(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),r,o.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(r8,r6,""),(0,o.registerVersion)(r8,r6,"esm2020"),e.s(["getDownloadURL",()=>ne,"getStorage",()=>nr,"ref",()=>nt,"uploadBytes",()=>r9],27215),e.s([],61086);let nn=(0,o.getApps)().length>0?(0,o.getApp)():(0,o.initializeApp)({apiKey:"AIzaSyAWOlkLsZrexWoOWKGjcTPq9oNgD-z7FpI",authDomain:"vibemap-94cb6.firebaseapp.com",databaseURL:"https://vibemap-94cb6-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"vibemap-94cb6",storageBucket:"vibemap-94cb6.firebasestorage.app",messagingSenderId:"804656272344",appId:"1:804656272344:web:b8912aa351d8c934be18ad",measurementId:"G-8HQ7DCZNYL"}),ni=rf(nn),ns=(0,rp.getDatabase)(nn),na=nr(nn);e.s(["auth",0,ni,"database",0,ns,"storage",0,na],59141)},52683,e=>{"use strict";let r;var n,i,s,a,o=e.i(43476),l=e.i(71645);e.i(51718);var c=e.i(18357),u=e.i(59141);function d(){let[r,n]=(0,l.useState)(null),[i,s]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let r=(0,c.onAuthStateChanged)(u.auth,r=>{n(r),r&&e.A(60574).then(({ref:n,update:i})=>{let{database:s}=e.r(59141);i(n(s,`users/${r.uid}`),{email:r.email,lastLogin:Date.now()})}),s(!1)});return()=>r()},[]),{user:r,loading:i,signOut:async()=>{try{await (0,c.signOut)(u.auth)}catch(e){console.error("Error signing out",e)}}}}e.i(1465);var h=e.i(34991);let f=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},p=(...e)=>e.filter((e,r,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===r).join(" ").trim();var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,l.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...c},u)=>(0,l.createElement)("svg",{ref:u,...m,width:r,height:r,stroke:e,strokeWidth:i?24*Number(n)/Number(r):n,className:p("lucide",s),...!a&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,r])=>(0,l.createElement)(e,r)),...Array.isArray(a)?a:[a]])),v=(e,r)=>{let n=(0,l.forwardRef)(({className:n,...i},s)=>(0,l.createElement)(g,{ref:s,iconNode:r,className:p(`lucide-${f(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...i}));return n.displayName=f(e),n},y=v("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),b=v("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),_=v("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),w=v("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=v("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function E(){let[e,r]=(0,l.useState)(!0),[n,i]=(0,l.useState)(""),[s,a]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[f,p]=(0,l.useState)(!1),[m,g]=(0,l.useState)(""),v=async r=>{r.preventDefault(),p(!0),g("");try{if(e)await (0,c.signInWithEmailAndPassword)(u.auth,n,s);else{let e=await (0,c.createUserWithEmailAndPassword)(u.auth,n,s);await (0,c.updateProfile)(e.user,{displayName:d})}}catch(e){g(e.message||"Something went wrong")}finally{p(!1)}};return(0,o.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center p-6 bg-vibe-black relative overflow-hidden",children:[(0,o.jsx)("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-vibe-primary/20 rounded-full blur-[120px]"}),(0,o.jsx)("div",{className:"absolute bottom-[-20%] right-[-10%] w-[500px] h-[500px] bg-vibe-accent/20 rounded-full blur-[120px]"}),(0,o.jsxs)("div",{className:"w-full max-w-md z-10 glass-panel p-8 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-vibe-primary to-vibe-accent mb-2",children:e?"Welcome Back":"Join VibeMap"}),(0,o.jsx)("p",{className:"text-vibe-text-secondary mb-8",children:e?"Sign in to see where your vibe is.":"Create an account to start sharing."}),(0,o.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[!e&&(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(w,{className:"absolute left-3 top-3 h-5 w-5 text-vibe-text-secondary"}),(0,o.jsx)("input",{type:"text",placeholder:"Display Name",value:d,onChange:e=>h(e.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-10 py-3 text-white placeholder-vibe-text-secondary outline-none focus:border-vibe-primary focus:ring-1 focus:ring-vibe-primary transition-all",required:!0})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(b,{className:"absolute left-3 top-3 h-5 w-5 text-vibe-text-secondary"}),(0,o.jsx)("input",{type:"email",placeholder:"Email Address",value:n,onChange:e=>i(e.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-10 py-3 text-white placeholder-vibe-text-secondary outline-none focus:border-vibe-primary focus:ring-1 focus:ring-vibe-primary transition-all",required:!0})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(_,{className:"absolute left-3 top-3 h-5 w-5 text-vibe-text-secondary"}),(0,o.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>a(e.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-10 py-3 text-white placeholder-vibe-text-secondary outline-none focus:border-vibe-primary focus:ring-1 focus:ring-vibe-primary transition-all",required:!0})]}),m&&(0,o.jsx)("p",{className:"text-vibe-error text-sm text-center",children:m}),(0,o.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-vibe-primary to-vibe-accent text-white font-bold py-3.5 rounded-xl hover:opacity-90 active:scale-[0.98] transition-all flex items-center justify-center gap-2 group",children:f?(0,o.jsx)(y,{className:"animate-spin"}):(0,o.jsxs)(o.Fragment,{children:[e?"Sign In":"Create Account",(0,o.jsx)(x,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsx)("button",{onClick:()=>r(!e),className:"text-sm text-vibe-text-secondary hover:text-white transition-colors",children:e?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})]})}var I=e.i(47167);let A=l.createContext(null);function T(){}let k=new Set(["_calcMatrices","_calcFogMatrices","_updateCameraState","_updateSeaLevelZoom"]),R=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function N(e){if(!e)return null;if("string"==typeof e||("toJS"in e&&(e=e.toJS()),!e.layers))return e;let r={};for(let n of e.layers)r[n.id]=n;let n=e.layers.map(e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);let i=r[e.ref];if(i)for(let r of(n=n||Object.assign({},e),delete n.ref,R))r in i&&(n[r]=i[r]);return n||e});return{...e,layers:n}}function S(e,r){if(e===r)return!0;if(!e||!r)return!1;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!S(e[n],r[n]))return!1;return!0}if(Array.isArray(r))return!1;if("object"==typeof e&&"object"==typeof r){let n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(let i of n)if(!r.hasOwnProperty(i)||!S(e[i],r[i]))return!1;return!0}return!1}let C={version:8,sources:{},layers:[]},P={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},U={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},O={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},L=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],M=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class F{constructor(e,r,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{let r=this.props[O[e.type]];r?r(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{("mousemove"===e.type||"mouseout"===e.type)&&this._updateHover(e);let r=this.props[P[e.type]];r&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),r(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){let n=this.props[U[e.type]],i=this._proxyTransform;if(n){var r;e.viewState={longitude:(r=i.$proposedTransform??i).center.lng,latitude:r.center.lat,zoom:r._seaLevelZoom??r.zoom,pitch:r.pitch,bearing:r.bearing,padding:r.padding,elevation:r._centerAltitude},n(e)}"moveend"===e.type&&(i.$proposedTransform=null)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=r,this._initialize(n)}get map(){return this._map}get transform(){return this._map.transform}setProps(e){let r=this.props;this.props=e;let n=this._updateSettings(e,r);n&&this._createProxyTransform(this._map);let i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,r),this._updateStyleComponents(e,r),this._updateHandlers(e,r),(n||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,r){let n=F.savedMaps.pop();if(!n)return null;let i=n.map,s=i.getContainer();for(r.className=s.className;s.childNodes.length>0;)r.appendChild(s.childNodes[0]);i._container=r,n.setProps({...e,styleDiffing:!1}),i.resize();let{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):n._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),n}_initialize(e){let{props:r}=this,{mapStyle:n=C}=r,i={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||function(){let e=null;if("undefined"!=typeof location){let r=/access_token=([^&\/]*)/.exec(location.search);e=r&&r[1]}try{e=e||I.default.env.MapboxAccessToken}catch{}try{e=e||I.default.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}()||null,container:e,style:N(n)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),r.gl){let e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,r.gl)}let a=new this._MapClass(i);s.padding&&a.setPadding(s.padding),r.cursor&&(a.getCanvas().style.cursor=r.cursor),this._createProxyTransform(a);let o=a._render;a._render=e=>{this._inRender=!0,o.call(a,e),this._inRender=!1};let l=a._renderTaskQueue.run;a._renderTaskQueue.run=e=>{this._proxyTransform.$internalUpdate=!0,l.call(a._renderTaskQueue,e),this._proxyTransform.$internalUpdate=!1,this._fireDefferedEvents()};let c=a.jumpTo;a.jumpTo=(...e)=>(this._proxyTransform.$internalUpdate=!0,c.apply(a,e),this._proxyTransform.$internalUpdate=!1,a);let u=a.fire;for(let e in a.fire=this._fireEvent.bind(this,u),a.on("styledata",()=>{this._updateStyleComponents(this.props,{})}),a.on("sourcedata",()=>{this._updateStyleComponents(this.props,{})}),P)a.on(e,this._onPointerEvent);for(let e in U)a.on(e,this._onCameraEvent);for(let e in O)a.on(e,this._onEvent);this._map=a}recycle(){let e=this.map.getContainer().querySelector("[mapboxgl-children]");e?.remove(),F.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){let e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createProxyTransform(e){var r;let n,i,s,a=(r=e.transform,n=!1,i={},s=null,new Proxy(r,{get(e,a){var o;return"$reactViewState"===a?i:"$proposedTransform"===a?s:"$internalUpdate"===a?n:"_setZoom"===a?e=>{n&&s?.[a](e),Number.isFinite(i.zoom)||r[a](e)}:(n&&"_translateCameraConstrained"===a&&(Number.isFinite((o=i).longitude)||Number.isFinite(o.latitude)||Number.isFinite(o.zoom)||Number.isFinite(o.pitch)||Number.isFinite(o.bearing))&&(s=s||r.clone()),k.has(a))?function(...e){s?.[a](...e),r[a](...e)}:n&&s?s[a]:r[a]},set(e,a,o){if("$reactViewState"===a)return!function(e,r){let n=e._constrain,i=e._calcMatrices;if(e._constrain=T,e._calcMatrices=T,Number.isFinite(r.bearing)&&(e.bearing=r.bearing),Number.isFinite(r.pitch)&&(e.pitch=r.pitch),r.padding&&!e.isPaddingEqual(r.padding)&&(e.padding=r.padding),Number.isFinite(r.longitude)||Number.isFinite(r.latitude)){let n=e.center;e._center=new n.constructor(r.longitude??n.lng,r.latitude??n.lat)}if(Number.isFinite(r.zoom))if(e._centerAltitude=r.elevation??0,e.elevation){e._seaLevelZoom=r.zoom;let n=e.pixelsPerMeter/e.worldSize*e._centerAltitude,i=Math.max(e._mercatorZfromZoom(r.zoom)-n,e._mercatorZfromZoom(e._maxZoom));e._setZoom(e._zoomFromMercatorZ(i))}else e._seaLevelZoom=null,e.zoom=r.zoom;e._constrain=n,e._calcMatrices=i,e._unmodified||(e._constrain(),e._calcMatrices())}(r,i=o),!0;if("$proposedTransform"===a)return s=o,!0;if("$internalUpdate"===a)return n=o,!0;let l=o;return"center"===a||"_center"===a?(Number.isFinite(i.longitude)||Number.isFinite(i.latitude))&&(l=new o.constructor(i.longitude??o.lng,i.latitude??o.lat)):"zoom"===a||"_zoom"===a||"_seaLevelZoom"===a?Number.isFinite(i.zoom)&&(l=r[a]):"_centerAltitude"===a?Number.isFinite(i.elevation)&&(l=r[a]):"pitch"===a||"_pitch"===a?Number.isFinite(i.pitch)&&(l=r[a]):("bearing"===a||"rotation"===a||"angle"===a)&&Number.isFinite(i.bearing)&&(l=r[a]),n&&l!==o&&(s=s||r.clone()),n&&s&&(s[a]=o),r[a]=l,!0}}));e.transform=a,e.painter.transform=a,this._proxyTransform=a}_updateSize(e){let{viewState:r}=e;if(r){let e=this._map;if(r.width!==e.transform.width||r.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,r){var n;let i=e.viewState||e,s=this._proxyTransform,{zoom:a,pitch:o,bearing:l}=s,c=(n=this._proxyTransform,!(!(Number.isFinite(i.longitude)&&n.center.lng!==i.longitude||Number.isFinite(i.latitude)&&n.center.lat!==i.latitude||Number.isFinite(i.bearing)&&n.bearing!==i.bearing||Number.isFinite(i.pitch)&&n.pitch!==i.pitch||Number.isFinite(i.zoom)&&(n._seaLevelZoom??n.zoom)!==i.zoom)&&(!i.padding||n.isPaddingEqual(i.padding))));if(s.$reactViewState=i,c&&r){let e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=a!==s.zoom),e.rotate||(e.rotate=l!==s.bearing),e.pitch||(e.pitch=o!==s.pitch)}return c}_updateSettings(e,r){let n=this._map,i=!1;for(let s of L)if(s in e&&!S(e[s],r[s])){i=!0;let r=n[`set${s[0].toUpperCase()}${s.slice(1)}`];r?.call(n,e[s])}return i}_updateStyle(e,r){if(e.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==r.mapStyle){let{mapStyle:r=C,styleDiffing:n=!0}=e,i={diff:n};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(N(r),i),!0}return!1}_updateStyleComponents(e,r){let n=this._map,i=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!S(e.light,r.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!S(e.fog,r.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!S(e.terrain,r.terrain)&&(!e.terrain||n.getSource(e.terrain.source))&&(i=!0,n.setTerrain(e.terrain))),i}_updateHandlers(e,r){let n=this._map,i=!1;for(let s of M){let a=e[s]??!0;S(a,r[s]??!0)||(i=!0,a?n[s].enable(a):n[s].disable())}return i}_queryRenderedFeatures(e){let r=this._map,{interactiveLayerIds:n=[]}=this.props;try{return r.queryRenderedFeatures(e,{layers:n.filter(r.getLayer.bind(r))})}catch{return[]}}_updateHover(e){let{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){let r=e.type,n=this._hoveredFeatures?.length>0,i=this._queryRenderedFeatures(e.point),s=i.length>0;!s&&n&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=i,s&&!n&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}_fireEvent(e,r,n){let i=this._map,s=this._proxyTransform,a=s.$internalUpdate;try{s.$internalUpdate=!1,e.call(i,r,n)}finally{s.$internalUpdate=a}return i}_fireDefferedEvents(){let e=this._map;for(let r in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1}}F.savedMaps=[];let j=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"],D="undefined"!=typeof document?l.useLayoutEffect:l.useEffect,B=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"],z=l.createContext(null),V=l.forwardRef(function(r,n){let i=(0,l.useContext)(A),[s,a]=(0,l.useState)(null),o=(0,l.useRef)(),{current:c}=(0,l.useRef)({mapLib:null,map:null});(0,l.useEffect)(()=>{let n,s=r.mapLib,l=!0;return Promise.resolve(s||e.A(52498)).then(e=>{if(!l)return;if(!e)throw Error("Invalid mapLib");let s="Map"in e?e:e.default;if(!s.Map)throw Error("Invalid mapLib");!function(e,r){for(let n of B)n in r&&(e[n]=r[n]);let{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=r;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,e=>{e&&console.error(e)},!0)}(s,r),r.reuseMaps&&(n=F.reuse(r,o.current)),n||(n=new F(s.Map,r,o.current)),c.map=function(e){if(!e)return null;let r=e.map,n={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{let i=r.transform;r.transform=e.transform;let s=r.project(n);return r.transform=i,s},unproject:n=>{let i=r.transform;r.transform=e.transform;let s=r.unproject(n);return r.transform=i,s},queryTerrainElevation:(n,i)=>{let s=r.transform;r.transform=e.transform;let a=r.queryTerrainElevation(n,i);return r.transform=s,a},queryRenderedFeatures:(n,i)=>{let s=r.transform;r.transform=e.transform;let a=r.queryRenderedFeatures(n,i);return r.transform=s,a}};for(let e of function(e){let r=new Set,n=e;for(;n;){for(let i of Object.getOwnPropertyNames(n))"_"!==i[0]&&"function"==typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&r.add(i);n=Object.getPrototypeOf(n)}return Array.from(r)}(r))e in n||j.includes(e)||(n[e]=r[e].bind(r));return n}(n),c.mapLib=s,a(n),i?.onMapMount(c.map,r.id)}).catch(e=>{let{onError:n}=r;n?n({type:"error",target:null,error:e}):console.error(e)}),()=>{l=!1,n&&(i?.onMapUnmount(r.id),r.reuseMaps?n.recycle():n.destroy())}},[]),D(()=>{s&&s.setProps(r)}),(0,l.useImperativeHandle)(n,()=>c.map,[s]);let u=(0,l.useMemo)(()=>({position:"relative",width:"100%",height:"100%",...r.style}),[r.style]);return l.createElement("div",{id:r.id,ref:o,style:u},s&&l.createElement(z.Provider,{value:c},l.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},r.children)))});var H=e.i(74080);let W=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function q(e,r){if(!e||!r)return;let n=e.style;for(let e in r){let i=r[e];Number.isFinite(i)&&!W.test(e)?n[e]=`${i}px`:n[e]=i}}function $(e,r){if(e===r)return null;let n=K(e),i=K(r),s=[];for(let e of i)n.has(e)||s.push(e);for(let e of n)i.has(e)||s.push(e);return 0===s.length?null:s}function K(e){return new Set(e?e.trim().split(/\s+/):[])}let G=(0,l.memo)((0,l.forwardRef)((e,r)=>{var n;let i,s,a,o,{map:c,mapLib:u}=(0,l.useContext)(z),d=(0,l.useRef)({props:e}),h=(0,l.useMemo)(()=>{let r=!1;l.Children.forEach(e.children,e=>{e&&(r=!0)});let n={...e,element:r?document.createElement("div"):null},i=new u.Marker(n);return i.setLngLat([e.longitude,e.latitude]),i.getElement().addEventListener("click",e=>{d.current.props.onClick?.({type:"click",target:i,originalEvent:e})}),i.on("dragstart",e=>{e.lngLat=h.getLngLat(),d.current.props.onDragStart?.(e)}),i.on("drag",e=>{e.lngLat=h.getLngLat(),d.current.props.onDrag?.(e)}),i.on("dragend",e=>{e.lngLat=h.getLngLat(),d.current.props.onDragEnd?.(e)}),i},[]);(0,l.useEffect)(()=>(h.addTo(c.getMap()),()=>{h.remove()}),[]);let{longitude:f,latitude:p,offset:m,style:g,draggable:v=!1,popup:y=null,rotation:b=0,rotationAlignment:_="auto",pitchAlignment:w="auto"}=e;(0,l.useEffect)(()=>{q(h.getElement(),g)},[g]),(0,l.useImperativeHandle)(r,()=>h,[]);let x=d.current.props;(h.getLngLat().lng!==f||h.getLngLat().lat!==p)&&h.setLngLat([f,p]),m&&(n=h.getOffset(),i=Array.isArray(n)?n[0]:n?n.x:0,s=Array.isArray(n)?n[1]:n?n.y:0,a=Array.isArray(m)?m[0]:m?m.x:0,o=Array.isArray(m)?m[1]:m?m.y:0,i!==a||s!==o)&&h.setOffset(m),h.isDraggable()!==v&&h.setDraggable(v),h.getRotation()!==b&&h.setRotation(b),h.getRotationAlignment()!==_&&h.setRotationAlignment(_),h.getPitchAlignment()!==w&&h.setPitchAlignment(w),h.getPopup()!==y&&h.setPopup(y);let E=$(x.className,e.className);if(E)for(let e of E)h.toggleClassName(e);return d.current.props=e,(0,H.createPortal)(e.children,h.getElement())}));function Q(e,r,n,i){let s=(0,l.useContext)(z),a=(0,l.useMemo)(()=>e(s),[]);return(0,l.useEffect)(()=>{let e="function"==typeof r&&"function"==typeof n?r:null,o="function"==typeof n?n:"function"==typeof r?r:null,{map:l}=s;return!l.hasControl(a)&&(l.addControl(a,(i||n||r)?.position),e&&e(s)),()=>{o&&o(s),l.hasControl(a)&&l.removeControl(a)}},[]),a}(0,l.memo)((0,l.forwardRef)((e,r)=>{let{map:n,mapLib:i}=(0,l.useContext)(z),s=(0,l.useMemo)(()=>document.createElement("div"),[]),a=(0,l.useRef)({props:e}),o=(0,l.useMemo)(()=>{let r={...e},n=new i.Popup(r);return n.setLngLat([e.longitude,e.latitude]),n.once("open",e=>{a.current.props.onOpen?.(e)}),n},[]);if((0,l.useEffect)(()=>{let e=e=>{a.current.props.onClose?.(e)};return o.on("close",e),o.setDOMContent(s).addTo(n.getMap()),()=>{o.off("close",e),o.isOpen()&&o.remove()}},[]),(0,l.useEffect)(()=>{q(o.getElement(),e.style)},[e.style]),(0,l.useImperativeHandle)(r,()=>o,[]),o.isOpen()){let r=a.current.props;(o.getLngLat().lng!==e.longitude||o.getLngLat().lat!==e.latitude)&&o.setLngLat([e.longitude,e.latitude]),e.offset&&!S(r.offset,e.offset)&&(o.options.anchor=e.anchor,o.setOffset(e.offset)),(r.anchor!==e.anchor||r.maxWidth!==e.maxWidth)&&o.setMaxWidth(e.maxWidth);let n=$(r.className,e.className);if(n)for(let e of n)o.toggleClassName(e);a.current.props=e}return(0,H.createPortal)(e.children,s)})),(0,l.memo)(function(e){let r=Q(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return(0,l.useEffect)(()=>{q(r._container,e.style)},[e.style]),null}),(0,l.memo)(function(e){let r=Q(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return(0,l.useEffect)(()=>{q(r._controlContainer,e.style)},[e.style]),null});let J=(0,l.memo)((0,l.forwardRef)(function(e,r){let n=(0,l.useRef)({props:e}),i=Q(({mapLib:r})=>{let i=new r.GeolocateControl(e),s=i._setupUI.bind(i);return i._setupUI=e=>{i._container.hasChildNodes()||s(e)},i.on("geolocate",e=>{n.current.props.onGeolocate?.(e)}),i.on("error",e=>{n.current.props.onError?.(e)}),i.on("outofmaxbounds",e=>{n.current.props.onOutOfMaxBounds?.(e)}),i.on("trackuserlocationstart",e=>{n.current.props.onTrackUserLocationStart?.(e)}),i.on("trackuserlocationend",e=>{n.current.props.onTrackUserLocationEnd?.(e)}),i},{position:e.position});return n.current.props=e,(0,l.useImperativeHandle)(r,()=>i,[]),(0,l.useEffect)(()=>{q(i._container,e.style)},[e.style]),null})),Z=(0,l.memo)(function(e){let r=Q(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return(0,l.useEffect)(()=>{q(r._container,e.style)},[e.style]),null});(0,l.memo)(function(e){let r=Q(({mapLib:r})=>new r.ScaleControl(e),{position:e.position}),n=(0,l.useRef)(e),i=n.current;n.current=e;let{style:s}=e;return void 0!==e.maxWidth&&e.maxWidth!==i.maxWidth&&(r.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==i.unit&&r.setUnit(e.unit),(0,l.useEffect)(()=>{q(r._container,s)},[s]),null}),e.s([],20235),e.s([],23144),e.s([],27530),e.s([],51955),e.s(["default",0,V],82604),e.i(82604),e.i(20235),e.i(23144),e.i(27530),e.i(51955);let X=v("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Y=v("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);function ee(e){let[r,n]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(!e)return;let r=(0,h.ref)(u.database,`users/${e.uid}/friends`),i={},s=(0,h.onValue)(r,e=>{i=e.val()||{}}),a=(0,h.ref)(u.database,"users"),o=(0,h.onValue)(a,e=>{let r=e.val();r&&i?n(Object.entries(r).filter(([e])=>!0===i[e]).map(([e,r])=>({uid:e,...r}))):n([])});return()=>{s(),o()}},[e]),{friends:r}}var et=e.i(98345),er=e.i(63178);function en({userLocation:e,speed:r,onChatStart:n,onOpenFriends:i}){let{user:s}=d(),{friends:a}=ee(s),{t:c}=(0,et.useLanguage)(),{resolvedTheme:u}=(0,er.useTheme)(),[h,f]=(0,l.useState)(!1),[p,m]=(0,l.useState)({latitude:10.7769,longitude:106.7009,zoom:14});return(0,l.useEffect)(()=>{e&&!h&&(m(r=>({...r,latitude:e.lat,longitude:e.lng,zoom:15})),f(!0))},[e,h]),(0,o.jsxs)("div",{className:"w-full h-full relative bg-background",children:[(0,o.jsxs)(V,{...p,onMove:e=>m(e.viewState),style:{width:"100%",height:"100%"},mapStyle:"light"===u?"mapbox://styles/mapbox/streets-v12":"mapbox://styles/mapbox/dark-v11",mapboxAccessToken:"pk.eyJ1IjoiaHV5bHUiLCJhIjoiY21qc2JtMmtzMnl5MzNucHZsbTFmcXFpcSJ9.JATVS0t1zf4qbIRV6GgJqg",attributionControl:!1,children:[(0,o.jsx)(J,{position:"top-right",trackUserLocation:!0,positionOptions:{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e4},onGeolocate:e=>{m(r=>({...r,latitude:e.coords.latitude,longitude:e.coords.longitude,zoom:15}))}}),(0,o.jsx)(Z,{position:"top-right"}),s&&e&&(0,o.jsx)(G,{longitude:e.lng,latitude:e.lat,anchor:"bottom",children:(0,o.jsxs)("div",{className:"relative group flex flex-col items-center",children:[(0,o.jsx)("div",{className:"absolute -inset-4 bg-primary/20 rounded-full animate-ping pointer-events-none"}),(0,o.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-primary bg-card/90 backdrop-blur-md flex items-center justify-center shadow-lg overflow-hidden z-10 relative",children:s.photoURL?(0,o.jsx)("img",{src:s.photoURL,alt:"Me",className:"w-full h-full object-cover"}):(0,o.jsx)(w,{className:"text-primary w-6 h-6"})}),(0,o.jsx)("div",{className:"absolute -bottom-6 text-xs bg-primary/90 text-primary-foreground font-bold px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none",children:c("map.you")})]})}),null!=r&&r>0&&(0,o.jsxs)("div",{className:"absolute top-4 right-16 md:right-20 bg-background/80 backdrop-blur-md border border-border px-3 py-1.5 rounded-full shadow-lg z-10 flex items-center gap-1.5",children:[(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,o.jsxs)("span",{className:"text-sm font-bold tabular-nums",children:[(3.6*r).toFixed(1)," ",(0,o.jsx)("span",{className:"text-xs font-normal text-muted-foreground",children:"km/h"})]})]}),a.map(e=>e.location&&(0,o.jsx)(G,{longitude:e.location.lng,latitude:e.location.lat,anchor:"bottom",onClick:r=>{r.originalEvent.stopPropagation(),n?.({uid:e.uid,displayName:e.name||"Friend",photoURL:e.photoURL})},children:(0,o.jsxs)("div",{className:"relative group flex flex-col items-center cursor-pointer transition-transform hover:scale-110",children:[(0,o.jsx)("div",{className:`w-3 h-3 rounded-full border-2 border-background mb-1 ${"online"===e.status?"bg-green-500":"bg-muted-foreground"}`}),(0,o.jsx)("div",{className:"w-10 h-10 rounded-full border-2 border-primary/50 bg-card/80 backdrop-blur-md flex items-center justify-center shadow-lg overflow-hidden",children:e.photoURL?(0,o.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-full h-full object-cover"}):(0,o.jsx)(w,{className:"text-foreground w-6 h-6"})}),(0,o.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-background/60 rounded-full p-2 z-20 backdrop-blur-sm",children:(0,o.jsx)(Y,{className:"w-5 h-5 text-primary"})}),void 0!==e.battery&&(0,o.jsxs)("div",{className:"absolute -top-4 right-[-10px] bg-background/80 rounded px-1 flex items-center gap-0.5 border border-border",children:[(0,o.jsxs)("span",{className:`text-[10px] ${e.battery<20?"text-destructive":"text-foreground"}`,children:[e.battery,"%"]}),e.isCharging&&(0,o.jsx)(X,{className:"w-2 h-2 text-yellow-400 fill-yellow-400"})]}),(0,o.jsx)("div",{className:"absolute -bottom-6 text-xs bg-background/80 text-foreground px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none",children:e.name||"Friend"})]})},e.uid))]}),(0,o.jsx)("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center pointer-events-none pb-[env(safe-area-inset-bottom)]",children:(0,o.jsxs)("div",{onClick:i,className:"glass-panel px-6 py-3 rounded-full pointer-events-auto border border-border bg-card/40 backdrop-blur-xl flex items-center gap-3 cursor-pointer hover:bg-card/60 transition-colors active:scale-95 shadow-lg",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,o.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),(0,o.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),(0,o.jsx)("span",{className:"text-foreground text-sm font-medium",children:c("map.active")})]}),(0,o.jsx)("div",{className:"h-4 w-[1px] bg-border"}),(0,o.jsxs)("span",{className:"text-muted-foreground text-sm",children:[a.length," ",c("map.friends_online")]})]})})]})}let ei=v("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),es=v("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ea({user:e,friendUid:r,friendName:n,onClose:i}){let{messages:s,sendMessage:a,loading:c}=function(e,r){let[n,i]=(0,l.useState)([]),[s,a]=(0,l.useState)(!1),o=e&&r?[e.uid,r].sort().join("_"):null;return(0,l.useEffect)(()=>{if(!o)return void i([]);a(!0);let e=(0,h.ref)(u.database,`chats/${o}/messages`),r=(0,h.query)(e,(0,h.limitToLast)(50)),n=(0,h.onValue)(r,e=>{let r=e.val();r?i(Object.entries(r).map(([e,r])=>({id:e,...r})).sort((e,r)=>e.timestamp-r.timestamp)):i([]),a(!1)});return()=>n()},[o]),{messages:n,sendMessage:async r=>{if(!o||!e||!r.trim())return;let n=(0,h.ref)(u.database,`chats/${o}/messages`);await (0,h.push)(n,{senderId:e.uid,text:r.trim(),timestamp:Date.now()})},loading:s,chatId:o}}(e,r),{t:d}=(0,et.useLanguage)(),{resolvedTheme:f}=(0,er.useTheme)(),[p,m]=(0,l.useState)(""),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[s]);let v=async e=>{e?.preventDefault(),p.trim()&&(m(""),await a(p))};return(0,o.jsxs)("div",{className:`fixed bottom-0 right-0 md:bottom-20 md:right-8 w-full md:w-80 h-[60dvh] md:h-96 flex flex-col ${"light"===f?"bg-white":"bg-[#1E1E1E]"} md:rounded-2xl border-t md:border border-neutral-200 dark:border-neutral-800 shadow-2xl z-50 overflow-hidden pb-[env(safe-area-inset-bottom)]`,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/50",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,o.jsx)("span",{className:"font-semibold text-foreground",children:n})]}),(0,o.jsx)("button",{onClick:i,className:"p-1 text-muted-foreground hover:text-foreground rounded-full hover:bg-muted transition-colors",children:(0,o.jsx)(es,{size:18})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar scroll-smooth bg-background",children:[c&&0===s.length&&(0,o.jsx)("div",{className:"flex justify-center py-4",children:(0,o.jsx)(y,{className:"animate-spin text-primary"})}),0===s.length&&!c&&(0,o.jsxs)("div",{className:"text-center text-muted-foreground text-xs mt-10",children:[d("common.chat")," ",n,"!"]}),s.map(r=>{let n=r.senderId===e.uid;return(0,o.jsx)("div",{className:`flex ${n?"justify-end":"justify-start"}`,children:(0,o.jsx)("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm break-words ${n?"bg-primary text-primary-foreground rounded-tr-none font-medium":"bg-muted text-foreground rounded-tl-none border border-border"}`,children:r.text})},r.id)}),(0,o.jsx)("div",{ref:g})]}),(0,o.jsxs)("form",{onSubmit:v,className:"p-3 border-t border-border bg-card flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:d("chat.placeholder"),className:"flex-1 bg-input border border-border rounded-full px-4 py-2 text-sm text-foreground focus:outline-none focus:border-primary transition-colors placeholder:text-muted-foreground"}),(0,o.jsx)("button",{type:"submit",disabled:!p.trim(),className:"p-2 bg-primary text-primary-foreground rounded-full disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/90 transition-transform active:scale-95",children:(0,o.jsx)(ei,{size:18})})]})]})}e.i(61086);var eo=e.i(27215);let el=v("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ec=v("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),eu=v("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),ed=v("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),eh=v("laptop",[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]]);function ef(e,r){return new Promise(function(n,i){let s;return ep(e).then(function(e){try{return s=e,n(new Blob([r.slice(0,2),s,r.slice(2)],{type:"image/jpeg"}))}catch(e){return i(e)}},i)})}let ep=e=>new Promise((r,n)=>{let i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{let i=new DataView(e),s=0;if(65496!==i.getUint16(s))return n("not a valid JPEG");for(s+=2;;){let a=i.getUint16(s);if(65498===a)break;let o=i.getUint16(s+2);if(65505===a&&0x45786966===i.getUint32(s+4)){let a,l=s+10;switch(i.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(l+2,a))return n("TIFF header contains invalid version");let c=i.getUint32(l+4,a),u=l+c+2+12*i.getUint16(l+c,a);for(let e=l+c+2;e<u;e+=12)if(274==i.getUint16(e,a)){if(3!==i.getUint16(e+2,a))return n("Orientation data type is invalid");if(1!==i.getUint32(e+4,a))return n("Orientation data count is invalid");i.setUint16(e+8,1,a);break}return r(e.slice(s,s+2+o))}s+=2+o}return r(new Blob)}),i.readAsArrayBuffer(e)});var em={};({get exports(){return em},set exports(t){em=t}}).exports=s={},s.parse=function(e,r){for(var n=s.bin.readUshort,i=s.bin.readUint,a=0,o={},l=new Uint8Array(e),c=l.length-4;0x6054b50!=i(l,c);)c--;var u=n(l,a=c+4+4);n(l,a+=2);var d=i(l,a+=2),h=i(l,a+=4);a+=4,a=h;for(var f=0;f<u;f++){i(l,a),a+=4,a+=4,a+=4,i(l,a+=4),d=i(l,a+=4);var p=i(l,a+=4),m=n(l,a+=4),g=n(l,a+2),v=n(l,a+4);a+=6;var y=i(l,a+=8);a+=4,a+=m+g+v,s._readLocal(l,y,o,d,p,r)}return o},s._readLocal=function(e,r,n,i,a,o){var l=s.bin.readUshort,c=s.bin.readUint;c(e,r),l(e,r+=4),l(e,r+=2);var u=l(e,r+=2);c(e,r+=2),c(e,r+=4),r+=4;var d=l(e,r+=8),h=l(e,r+=2);r+=2;var f=s.bin.readUTF8(e,r,d);if(r+=d,r+=h,o)n[f]={size:a,csize:i};else{var p=new Uint8Array(e.buffer,r);if(0==u)n[f]=new Uint8Array(p.buffer.slice(r,r+i));else{if(8!=u)throw"unknown compression method: "+u;var m=new Uint8Array(a);s.inflateRaw(p,m),n[f]=m}}},s.inflateRaw=function(e,r){return s.F.inflate(e,r)},s.inflate=function(e,r){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},s.deflate=function(e,r){null==r&&(r={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=s.F.deflateRaw(e,i,n,r.level);var a=s.adler(e,0,e.length);return i[n+0]=a>>>24&255,i[n+1]=a>>>16&255,i[n+2]=a>>>8&255,i[n+3]=a>>>0&255,new Uint8Array(i.buffer,0,n+4)},s.deflateRaw=function(e,r){null==r&&(r={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=s.F.deflateRaw(e,n,i,r.level);return new Uint8Array(n.buffer,0,i)},s.encode=function(e,r){null==r&&(r=!1);var n=0,i=s.bin.writeUint,a=s.bin.writeUshort,o={};for(var l in e){var c=!s._noNeed(l)&&!r,u=e[l],d=s.crc.crc(u,0,u.length);o[l]={cpr:c,usize:u.length,crc:d,file:c?s.deflateRaw(u):u}}for(var l in o)n+=o[l].file.length+30+46+2*s.bin.sizeUTF8(l);var h=new Uint8Array(n+=22),f=0,p=[];for(var l in o){var m=o[l];p.push(f),f=s._writeHeader(h,f,l,m,0)}var g=0,v=f;for(var l in o)m=o[l],p.push(f),f=s._writeHeader(h,f,l,m,1,p[g++]);var y=f-v;return i(h,f,0x6054b50),f+=4,a(h,f+=4,g),a(h,f+=2,g),i(h,f+=2,y),i(h,f+=4,v),f+=4,f+=2,h.buffer},s._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},s._writeHeader=function(e,r,n,i,a,o){var l=s.bin.writeUint,c=s.bin.writeUshort,u=i.file;return l(e,r,0==a?0x4034b50:0x2014b50),r+=4,1==a&&(r+=2),c(e,r,20),c(e,r+=2,0),c(e,r+=2,8*!!i.cpr),l(e,r+=2,0),l(e,r+=4,i.crc),l(e,r+=4,u.length),l(e,r+=4,i.usize),c(e,r+=4,s.bin.sizeUTF8(n)),c(e,r+=2,0),r+=2,1==a&&(r+=2,r+=2,l(e,r+=6,o),r+=4),r+=s.bin.writeUTF8(e,r,n),0==a&&(e.set(u,r),r+=u.length),r},s.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var n=r,i=0;i<8;i++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update:function(e,r,n,i){for(var a=0;a<i;a++)e=s.crc.table[255&(e^r[n+a])]^e>>>8;return e},crc:function(e,r,n){return 0xffffffff^s.crc.update(0xffffffff,e,r,n)}},s.adler=function(e,r,n){for(var i=1,s=0,a=r,o=r+n;a<o;){for(var l=Math.min(a+5552,o);a<l;)s+=i+=e[a++];i%=65521,s%=65521}return s<<16|i},s.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255},readUint:function(e,r){return 0x1000000*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255,e[r+2]=n>>16&255,e[r+3]=n>>24&255},readASCII:function(e,r,n){for(var i="",s=0;s<n;s++)i+=String.fromCharCode(e[r+s]);return i},writeASCII:function(e,r,n){for(var i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,n){for(var i,a="",o=0;o<n;o++)a+="%"+s.bin.pad(e[r+o].toString(16));try{i=decodeURIComponent(a)}catch(i){return s.bin.readASCII(e,r,n)}return i},writeUTF8:function(e,r,n){for(var i=n.length,s=0,a=0;a<i;a++){var o=n.charCodeAt(a);if(0==(0xffffff80&o))e[r+s]=o,s++;else if(0==(0xfffff800&o))e[r+s]=192|o>>6,e[r+s+1]=128|63&o,s+=2;else if(0==(0xffff0000&o))e[r+s]=224|o>>12,e[r+s+1]=128|o>>6&63,e[r+s+2]=128|63&o,s+=3;else{if(0!=(0xffe00000&o))throw"e";e[r+s]=240|o>>18,e[r+s+1]=128|o>>12&63,e[r+s+2]=128|o>>6&63,e[r+s+3]=128|63&o,s+=4}}return s},sizeUTF8:function(e){for(var r=e.length,n=0,i=0;i<r;i++){var s=e.charCodeAt(i);if(0==(0xffffff80&s))n++;else if(0==(0xfffff800&s))n+=2;else if(0==(0xffff0000&s))n+=3;else{if(0!=(0xffe00000&s))throw"e";n+=4}}return n}},s.F={},s.F.deflateRaw=function(e,r,n,i){var a=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],o=s.F.U,l=s.F._goodIndex;s.F._hash;var c=s.F._putsE,u=0,d=n<<3,h=0,f=e.length;if(0==i){for(;u<f;)c(r,d,+(u+(A=Math.min(65535,f-u))==f)),d=s.F._copyExact(e,u,A,r,d+8),u+=A;return d>>>3}var p=o.lits,m=o.strt,g=o.prev,v=0,y=0,b=0,_=0,w=0,x=0;for(f>2&&(m[x=s.F._hash(e,0)]=0),u=0;u<f;u++){if(w=x,u+1<f-2){x=s.F._hash(e,u+1);var E=u+1&32767;g[E]=m[x],m[x]=E}if(h<=u){(v>14e3||y>26697)&&f-u>100&&(h<u&&(p[v]=u-h,v+=2,h=u),d=s.F._writeBlock(+(u==f-1||h==f),p,v,_,e,b,u-b,r,d),v=y=_=0,b=u);var I=0;u<f-2&&(I=s.F._bestMatch(e,u,g,w,Math.min(a[2],f-u),a[3]));var A=I>>>16,T=65535&I;if(0!=I){T=65535&I;var k=l(A=I>>>16,o.of0);o.lhst[257+k]++;var R=l(T,o.df0);o.dhst[R]++,_+=o.exb[k]+o.dxb[R],p[v]=A<<23|u-h,p[v+1]=T<<16|k<<8|R,v+=2,h=u+A}else o.lhst[e[u]]++;y++}}for(b==u&&0!=e.length||(h<u&&(p[v]=u-h,v+=2,h=u),d=s.F._writeBlock(1,p,v,_,e,b,u-b,r,d),v=0,y=0,v=y=_=0,b=u);0!=(7&d);)d++;return d>>>3},s.F._bestMatch=function(e,r,n,i,a,o){var l=32767&r,c=n[l],u=l-c+32768&32767;if(c==l||i!=s.F._hash(e,r-u))return 0;for(var d=0,h=0,f=Math.min(32767,r);u<=f&&0!=--o&&c!=l;){if(0==d||e[r+d]==e[r+d-u]){var p=s.F._howLong(e,r,u);if(p>d){if(h=u,(d=p)>=a)break;u+2<p&&(p=u+2);for(var m=0,g=0;g<p-2;g++){var v=r-u+g+32768&32767,y=v-n[v]+32768&32767;y>m&&(m=y,c=v)}}}u+=(l=c)-(c=n[l])+32768&32767}return d<<16|h},s.F._howLong=function(e,r,n){if(e[r]!=e[r-n]||e[r+1]!=e[r+1-n]||e[r+2]!=e[r+2-n])return 0;var i=r,s=Math.min(e.length,r+258);for(r+=3;r<s&&e[r]==e[r-n];)r++;return r-i},s.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,r,n,i,a,o,l,c,u){var d,h,f,p,m,g,v,y,b,_,w,x=s.F.U,E=s.F._putsF,I=s.F._putsE;x.lhst[256]++,p=(f=s.F.getTrees())[0],m=f[1],g=f[2],v=f[3],y=f[4],b=f[5],_=f[6],w=f[7];var A=32+(0==(u+3&7)?0:8-(u+3&7))+(l<<3),T=i+s.F.contSize(x.fltree,x.lhst)+s.F.contSize(x.fdtree,x.dhst),k=i+s.F.contSize(x.ltree,x.lhst)+s.F.contSize(x.dtree,x.dhst);k+=14+3*b+s.F.contSize(x.itree,x.ihst)+(2*x.ihst[16]+3*x.ihst[17]+7*x.ihst[18]);for(var R=0;R<286;R++)x.lhst[R]=0;for(R=0;R<30;R++)x.dhst[R]=0;for(R=0;R<19;R++)x.ihst[R]=0;var N=A<T&&A<k?0:T<k?1:2;if(E(c,u,e),E(c,u+1,N),u+=3,0==N){for(;0!=(7&u);)u++;u=s.F._copyExact(a,o,l,c,u)}else{if(1==N&&(d=x.fltree,h=x.fdtree),2==N){s.F.makeCodes(x.ltree,p),s.F.revCodes(x.ltree,p),s.F.makeCodes(x.dtree,m),s.F.revCodes(x.dtree,m),s.F.makeCodes(x.itree,g),s.F.revCodes(x.itree,g),d=x.ltree,h=x.dtree,I(c,u,v-257),I(c,u+=5,y-1),I(c,u+=5,b-4),u+=4;for(var S=0;S<b;S++)I(c,u+3*S,x.itree[1+(x.ordr[S]<<1)]);u+=3*b,u=s.F._codeTiny(_,x.itree,c,u),u=s.F._codeTiny(w,x.itree,c,u)}for(var C=o,P=0;P<n;P+=2){for(var U=r[P],O=U>>>23,L=C+(8388607&U);C<L;)u=s.F._writeLit(a[C++],d,c,u);if(0!=O){var M=r[P+1],F=M>>16,j=M>>8&255,D=255&M;I(c,u=s.F._writeLit(257+j,d,c,u),O-x.of0[j]),u+=x.exb[j],E(c,u=s.F._writeLit(D,h,c,u),F-x.df0[D]),u+=x.dxb[D],C+=O}}u=s.F._writeLit(256,d,c,u)}return u},s.F._copyExact=function(e,r,n,i,s){var a=s>>>3;return i[a]=n,i[a+1]=n>>>8,i[a+2]=255-i[a],i[a+3]=255-i[a+1],a+=4,i.set(new Uint8Array(e.buffer,r,n),a),s+(n+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,r=s.F._hufTree(e.lhst,e.ltree,15),n=s.F._hufTree(e.dhst,e.dtree,15),i=[],a=s.F._lenCodes(e.ltree,i),o=[],l=s.F._lenCodes(e.dtree,o),c=0;c<i.length;c+=2)e.ihst[i[c]]++;for(c=0;c<o.length;c+=2)e.ihst[o[c]]++;for(var u=s.F._hufTree(e.ihst,e.itree,7),d=19;d>4&&0==e.itree[1+(e.ordr[d-1]<<1)];)d--;return[r,n,u,a,l,d,i,o]},s.F.getSecond=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(e[n+1]);return r},s.F.nonZero=function(e){for(var r="",n=0;n<e.length;n+=2)0!=e[n+1]&&(r+=(n>>1)+",");return r},s.F.contSize=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i]*e[1+(i<<1)];return n},s.F._codeTiny=function(e,r,n,i){for(var a=0;a<e.length;a+=2){var o=e[a],l=e[a+1];i=s.F._writeLit(o,r,n,i);var c=16==o?2:17==o?3:7;o>15&&(s.F._putsE(n,i,l,c),i+=c)}return i},s.F._lenCodes=function(e,r){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var i=0;i<n;i+=2){var s=e[i+1],a=i+3<n?e[i+3]:-1,o=i+5<n?e[i+5]:-1,l=0==i?-1:e[i-1];if(0==s&&a==s&&o==s){for(var c=i+5;c+2<n&&e[c+2]==s;)c+=2;(u=Math.min(c+1-i>>>1,138))<11?r.push(17,u-3):r.push(18,u-11),i+=2*u-2}else if(s==l&&a==s&&o==s){for(c=i+5;c+2<n&&e[c+2]==s;)c+=2;var u=Math.min(c+1-i>>>1,6);r.push(16,u-3),i+=2*u-2}else r.push(s,0)}return n>>>1},s.F._hufTree=function(e,r,n){var i=[],a=e.length,o=r.length,l=0;for(l=0;l<o;l+=2)r[l]=0,r[l+1]=0;for(l=0;l<a;l++)0!=e[l]&&i.push({lit:l,f:e[l]});var c=i.length,u=i.slice(0);if(0==c)return 0;if(1==c){var d=i[0].lit;return u=+(0==d),r[1+(d<<1)]=1,r[1+(u<<1)]=1,1}i.sort(function(e,r){return e.f-r.f});var h=i[0],f=i[1],p=0,m=1,g=2;for(i[0]={lit:-1,f:h.f+f.f,l:h,r:f,d:0};m!=c-1;)h=p!=m&&(g==c||i[p].f<i[g].f)?i[p++]:i[g++],f=p!=m&&(g==c||i[p].f<i[g].f)?i[p++]:i[g++],i[m++]={lit:-1,f:h.f+f.f,l:h,r:f};var v=s.F.setDepth(i[m-1],0);for(v>n&&(s.F.restrictDepth(u,n,v),v=n),l=0;l<c;l++)r[1+(u[l].lit<<1)]=u[l].d;return v},s.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(s.F.setDepth(e.l,r+1),s.F.setDepth(e.r,r+1))},s.F.restrictDepth=function(e,r,n){var i=0,s=1<<n-r,a=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),i=0;i<e.length&&e[i].d>r;i++){var o=e[i].d;e[i].d=r,a+=s-(1<<n-o)}for(a>>>=n-r;a>0;)(o=e[i].d)<r?(e[i].d++,a-=1<<r-o-1):i++;for(;i>=0;i--)e[i].d==r&&a<0&&(e[i].d--,a++);0!=a&&console.log("debt left")},s.F._goodIndex=function(e,r){var n=0;return r[16]<=e&&(n|=16),r[8|n]<=e&&(n|=8),r[4|n]<=e&&(n|=4),r[2|n]<=e&&(n|=2),r[1|n]<=e&&(n|=1),n},s.F._writeLit=function(e,r,n,i){return s.F._putsF(n,i,r[e<<1]),i+r[1+(e<<1)]},s.F.inflate=function(e,r){var n=Uint8Array;if(3==e[0]&&0==e[1])return r||new n(0);var i=s.F,a=i._bitsF,o=i._bitsE,l=i._decodeTiny,c=i.makeCodes,u=i.codes2map,d=i._get17,h=i.U,f=null==r;f&&(r=new n(e.length>>>2<<3));for(var p,m,g=0,v=0,y=0,b=0,_=0,w=0,x=0,E=0,I=0;0==g;)if(g=a(e,I,1),v=a(e,I+1,2),I+=3,0!=v){if(f&&(r=s.F._check(r,E+131072)),1==v&&(p=h.flmap,m=h.fdmap,w=511,x=31),2==v){y=o(e,I,5)+257,b=o(e,I+5,5)+1,_=o(e,I+10,4)+4,I+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var T=1;for(A=0;A<_;A++){var k=o(e,I+3*A,3);h.itree[1+(h.ordr[A]<<1)]=k,k>T&&(T=k)}I+=3*_,c(h.itree,T),u(h.itree,T,h.imap),p=h.lmap,m=h.dmap,I=l(h.imap,(1<<T)-1,y+b,e,I,h.ttree);var R=i._copyOut(h.ttree,0,y,h.ltree);w=(1<<R)-1;var N=i._copyOut(h.ttree,y,b,h.dtree);x=(1<<N)-1,c(h.ltree,R),u(h.ltree,R,p),c(h.dtree,N),u(h.dtree,N,m)}for(;;){var S=p[d(e,I)&w];I+=15&S;var C=S>>>4;if(C>>>8==0)r[E++]=C;else{if(256==C)break;var P=E+C-254;if(C>264){var U=h.ldef[C-257];P=E+(U>>>3)+o(e,I,7&U),I+=7&U}var O=m[d(e,I)&x];I+=15&O;var L=O>>>4,M=h.ddef[L],F=(M>>>4)+a(e,I,15&M);for(I+=15&M,f&&(r=s.F._check(r,E+131072));E<P;)r[E]=r[E++-F],r[E]=r[E++-F],r[E]=r[E++-F],r[E]=r[E++-F];E=P}}}else{0!=(7&I)&&(I+=8-(7&I));var j=4+(I>>>3),D=e[j-4]|e[j-3]<<8;f&&(r=s.F._check(r,E+D)),r.set(new n(e.buffer,e.byteOffset+j,D),E),I=j+D<<3,E+=D}return r.length==E?r:r.slice(0,E)},s.F._check=function(e,r){var n=e.length;if(r<=n)return e;var i=new Uint8Array(Math.max(n<<1,r));return i.set(e,0),i},s.F._decodeTiny=function(e,r,n,i,a,o){for(var l=s.F._bitsE,c=s.F._get17,u=0;u<n;){var d=e[c(i,a)&r];a+=15&d;var h=d>>>4;if(h<=15)o[u]=h,u++;else{var f=0,p=0;16==h?(p=3+l(i,a,2),a+=2,f=o[u-1]):17==h?(p=3+l(i,a,3),a+=3):18==h&&(p=11+l(i,a,7),a+=7);for(var m=u+p;u<m;)o[u]=f,u++}}return a},s.F._copyOut=function(e,r,n,i){for(var s=0,a=0,o=i.length>>>1;a<n;){var l=e[a+r];i[a<<1]=0,i[1+(a<<1)]=l,l>s&&(s=l),a++}for(;a<o;)i[a<<1]=0,i[1+(a<<1)]=0,a++;return s},s.F.makeCodes=function(e,r){for(var n,i,a,o,l=s.F.U,c=e.length,u=l.bl_count,d=0;d<=r;d++)u[d]=0;for(d=1;d<c;d+=2)u[e[d]]++;var h=l.next_code;for(n=0,u[0]=0,i=1;i<=r;i++)n=n+u[i-1]<<1,h[i]=n;for(a=0;a<c;a+=2)0!=(o=e[a+1])&&(e[a]=h[o],h[o]++)},s.F.codes2map=function(e,r,n){for(var i=e.length,a=s.F.U.rev15,o=0;o<i;o+=2)if(0!=e[o+1])for(var l=o>>1,c=e[o+1],u=l<<4|c,d=r-c,h=e[o]<<d,f=h+(1<<d);h!=f;)n[a[h]>>>15-r]=u,h++},s.F.revCodes=function(e,r){for(var n=s.F.U.rev15,i=15-r,a=0;a<e.length;a+=2){var o=e[a]<<r-e[a+1];e[a]=n[o]>>>i}},s.F._putsE=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},s.F._putsF=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},s.F._bitsE=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},s.F._bitsF=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},s.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},s.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},s.F.U=(n=Uint16Array,i=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new n(65536),prev:new n(32768)}),function(){for(var e=s.F.U,r=0;r<32768;r++){var n=r;n=(0xff00ff00&(n=(0xf0f0f0f0&(n=(0xcccccccc&(n=(0xaaaaaaaa&n)>>>1|(0x55555555&n)<<1))>>>2|(0x33333333&n)<<2))>>>4|(0xf0f0f0f&n)<<4))>>>8|(0xff00ff&n)<<8,e.rev15[r]=(n>>>16|n<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),i(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();var eg=(a={__proto__:null,default:em},[em].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in a)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(a));let ev=function(){let e,r,n;var i={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,n){e[r]=n>>8&255,e[r+1]=255&n},readUint:(e,r)=>0x1000000*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,n){e[r]=n>>24&255,e[r+1]=n>>16&255,e[r+2]=n>>8&255,e[r+3]=255&n},readASCII(e,r,n){let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(e[r+s]);return i},writeASCII(e,r,n){for(let i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},readBytes(e,r,n){let i=[];for(let s=0;s<n;s++)i.push(e[r+s]);return i},pad:e=>e.length<2?`0${e}`:e,readUTF8(e,r,n){let s,a="";for(let s=0;s<n;s++)a+=`%${i.pad(e[r+s].toString(16))}`;try{s=decodeURIComponent(a)}catch(s){return i.readASCII(e,r,n)}return s}};function s(e,r,n,s){let a=r*n,o=Math.ceil(r*c(s)/8),l=new Uint8Array(4*a),u=new Uint32Array(l.buffer),{ctype:d}=s,{depth:h}=s,f=i.readUshort;if(6==d){let r=a<<2;if(8==h)for(var p=0;p<r;p+=4)l[p]=e[p],l[p+1]=e[p+1],l[p+2]=e[p+2],l[p+3]=e[p+3];if(16==h)for(p=0;p<r;p++)l[p]=e[p<<1]}else if(2==d){let r=s.tabs.tRNS;if(null==r){if(8==h)for(p=0;p<a;p++){var m=3*p;u[p]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m]}if(16==h)for(p=0;p<a;p++)m=6*p,u[p]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m]}else{var g=r[0];let n=r[1],i=r[2];if(8==h)for(p=0;p<a;p++){var v=p<<2;m=3*p,u[p]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m],e[m]==g&&e[m+1]==n&&e[m+2]==i&&(l[v+3]=0)}if(16==h)for(p=0;p<a;p++)v=p<<2,m=6*p,u[p]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m],f(e,m)==g&&f(e,m+2)==n&&f(e,m+4)==i&&(l[v+3]=0)}}else if(3==d){let i=s.tabs.PLTE,c=s.tabs.tRNS,u=c?c.length:0;if(1==h)for(var y,b=0;b<n;b++){var _=b*o,w=b*r;for(p=0;p<r;p++){v=w+p<<2;var x=3*(y=e[_+(p>>3)]>>7-(7&p)&1);l[v]=i[x],l[v+1]=i[x+1],l[v+2]=i[x+2],l[v+3]=y<u?c[y]:255}}if(2==h)for(b=0;b<n;b++)for(_=b*o,w=b*r,p=0;p<r;p++)v=w+p<<2,x=3*(y=e[_+(p>>2)]>>6-((3&p)<<1)&3),l[v]=i[x],l[v+1]=i[x+1],l[v+2]=i[x+2],l[v+3]=y<u?c[y]:255;if(4==h)for(b=0;b<n;b++)for(_=b*o,w=b*r,p=0;p<r;p++)v=w+p<<2,x=3*(y=e[_+(p>>1)]>>4-((1&p)<<2)&15),l[v]=i[x],l[v+1]=i[x+1],l[v+2]=i[x+2],l[v+3]=y<u?c[y]:255;if(8==h)for(p=0;p<a;p++)v=p<<2,x=3*(y=e[p]),l[v]=i[x],l[v+1]=i[x+1],l[v+2]=i[x+2],l[v+3]=y<u?c[y]:255}else if(4==d){if(8==h)for(p=0;p<a;p++){v=p<<2;var E,I=e[E=p<<1];l[v]=I,l[v+1]=I,l[v+2]=I,l[v+3]=e[E+1]}if(16==h)for(p=0;p<a;p++)v=p<<2,I=e[E=p<<2],l[v]=I,l[v+1]=I,l[v+2]=I,l[v+3]=e[E+2]}else if(0==d)for(g=s.tabs.tRNS?s.tabs.tRNS:-1,b=0;b<n;b++){let n=b*o,i=b*r;if(1==h)for(var A=0;A<r;A++){var T=255*((I=255*(e[n+(A>>>3)]>>>7-(7&A)&1))!=255*g);u[i+A]=T<<24|I<<16|I<<8|I}else if(2==h)for(A=0;A<r;A++)T=255*((I=85*(e[n+(A>>>2)]>>>6-((3&A)<<1)&3))!=85*g),u[i+A]=T<<24|I<<16|I<<8|I;else if(4==h)for(A=0;A<r;A++)T=255*((I=17*(e[n+(A>>>1)]>>>4-((1&A)<<2)&15))!=17*g),u[i+A]=T<<24|I<<16|I<<8|I;else if(8==h)for(A=0;A<r;A++)T=255*((I=e[n+A])!=g),u[i+A]=T<<24|I<<16|I<<8|I;else if(16==h)for(A=0;A<r;A++)I=e[n+(A<<1)],T=255*(f(e,n+(A<<1))!=g),u[i+A]=T<<24|I<<16|I<<8|I}return l}function a(e,r,n,i){let s=new Uint8Array((Math.ceil(n*c(e)/8)+1+e.interlace)*i);return r=e.tabs.CgBI?l(r,s):o(r,s),0==e.interlace?r=u(r,e,0,n,i):1==e.interlace&&(r=function(e,r){let n=r.width,i=r.height,s=c(r),a=s>>3,o=Math.ceil(n*s/8),l=new Uint8Array(i*o),d=0,h=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1],g=0;for(;g<7;){let c=p[g],y=m[g],b=0,_=0,w=h[g];for(;w<i;)w+=c,_++;let x=f[g];for(;x<n;)x+=y,b++;let E=Math.ceil(b*s/8);u(e,r,d,b,_);let I=0,A=h[g];for(;A<i;){let r=f[g],i=d+I*E<<3;for(;r<n;){var v;if(1==s&&(v=(v=e[i>>3])>>7-(7&i)&1,l[A*o+(r>>3)]|=v<<7-(7&r)),2==s&&(v=(v=e[i>>3])>>6-(7&i)&3,l[A*o+(r>>2)]|=v<<6-((3&r)<<1)),4==s&&(v=(v=e[i>>3])>>4-(7&i)&15,l[A*o+(r>>1)]|=v<<4-((1&r)<<2)),s>=8){let n=A*o+r*a;for(let r=0;r<a;r++)l[n+r]=e[(i>>3)+r]}i+=s,r+=y}I++,A+=c}b*_!=0&&(d+=_*(1+E)),g+=1}return l}(r,e)),r}function o(e,r){return l(new Uint8Array(e.buffer,2,e.length-6),r)}var l=((e={}).N=function(r,n){let i=Uint8Array,s,a,o=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,m=0;if(3==r[0]&&0==r[1])return n||new i(0);let g=e.b,v=e.e,y=e.R,b=e.n,_=e.A,w=e.Z,x=e.m,E=null==n;for(E&&(n=new i(r.length>>>2<<5));0==o;)if(o=g(r,m,1),l=g(r,m+1,2),m+=3,0!=l){if(E&&(n=e.W(n,p+131072)),1==l&&(s=x.J,a=x.h,h=511,f=31),2==l){c=v(r,m,5)+257,u=v(r,m+5,5)+1,d=v(r,m+10,4)+4,m+=14;let n=1;for(var I=0;I<38;I+=2)x.Q[I]=0,x.Q[I+1]=0;for(I=0;I<d;I++){let e=v(r,m+3*I,3);x.Q[1+(x.X[I]<<1)]=e,e>n&&(n=e)}m+=3*d,b(x.Q,n),_(x.Q,n,x.u),s=x.w,a=x.d,m=y(x.u,(1<<n)-1,c+u,r,m,x.v);let i=e.V(x.v,0,c,x.C);h=(1<<i)-1;let o=e.V(x.v,c,u,x.D);f=(1<<o)-1,b(x.C,i),_(x.C,i,s),b(x.D,o),_(x.D,o,a)}for(;;){let e=s[w(r,m)&h];m+=15&e;let i=e>>>4;if(i>>>8==0)n[p++]=i;else{if(256==i)break;{let e=p+i-254;if(i>264){let n=x.q[i-257];e=p+(n>>>3)+v(r,m,7&n),m+=7&n}let s=a[w(r,m)&f];m+=15&s;let o=s>>>4,l=x.c[o],c=(l>>>4)+g(r,m,15&l);for(m+=15&l;p<e;)n[p]=n[p++-c],n[p]=n[p++-c],n[p]=n[p++-c],n[p]=n[p++-c];p=e}}}}else{0!=(7&m)&&(m+=8-(7&m));let s=4+(m>>>3),a=r[s-4]|r[s-3]<<8;E&&(n=e.W(n,p+a)),n.set(new i(r.buffer,r.byteOffset+s,a),p),m=s+a<<3,p+=a}return n.length==p?n:n.slice(0,p)},e.W=function(e,r){let n=e.length;if(r<=n)return e;let i=new Uint8Array(n<<1);return i.set(e,0),i},e.R=function(r,n,i,s,a,o){let l=e.e,c=e.Z,u=0;for(;u<i;){let e=r[c(s,a)&n];a+=15&e;let i=e>>>4;if(i<=15)o[u]=i,u++;else{let e=0,r=0;16==i?(r=3+l(s,a,2),a+=2,e=o[u-1]):17==i?(r=3+l(s,a,3),a+=3):18==i&&(r=11+l(s,a,7),a+=7);let n=u+r;for(;u<n;)o[u]=e,u++}}return a},e.V=function(e,r,n,i){let s=0,a=0,o=i.length>>>1;for(;a<n;){let n=e[a+r];i[a<<1]=0,i[1+(a<<1)]=n,n>s&&(s=n),a++}for(;a<o;)i[a<<1]=0,i[1+(a<<1)]=0,a++;return s},e.n=function(r,n){let i,s,a,o,l=e.m,c=r.length,u=l.j;for(var d=0;d<=n;d++)u[d]=0;for(d=1;d<c;d+=2)u[r[d]]++;let h=l.K;for(i=0,u[0]=0,s=1;s<=n;s++)i=i+u[s-1]<<1,h[s]=i;for(a=0;a<c;a+=2)0!=(o=r[a+1])&&(r[a]=h[o],h[o]++)},e.A=function(r,n,i){let s=r.length,a=e.m.r;for(let e=0;e<s;e+=2)if(0!=r[e+1]){let s=e>>1,o=r[e+1],l=s<<4|o,c=n-o,u=r[e]<<c,d=u+(1<<c);for(;u!=d;)i[a[u]>>>15-n]=l,u++}},e.l=function(r,n){let i=e.m.r,s=15-n;for(let e=0;e<r.length;e+=2){let a=r[e]<<n-r[e+1];r[e]=i[a]>>>s}},e.M=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},e.I=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},e.e=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},e.b=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},e.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},r=Uint16Array,n=Uint32Array,e.m={K:new r(16),j:new r(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new r(512),_:[],h:new r(32),$:[],w:new r(32768),C:[],v:[],d:new r(32768),D:[],u:new r(512),Q:[],r:new r(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new r(65536),g:new r(32768)},function(){let r=e.m;for(var n=0;n<32768;n++){let e=n;e=(0xff00ff00&(e=(0xf0f0f0f0&(e=(0xcccccccc&(e=(0xaaaaaaaa&e)>>>1|(0x55555555&e)<<1))>>>2|(0x33333333&e)<<2))>>>4|(0xf0f0f0f&e)<<4))>>>8|(0xff00ff&e)<<8,r.r[n]=(e>>>16|e<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];i(r._,144,8),i(r._,112,9),i(r._,24,7),i(r._,8,8),e.n(r._,9),e.A(r._,9,r.J),e.l(r._,9),i(r.$,32,5),e.n(r.$,5),e.A(r.$,5,r.h),e.l(r.$,5),i(r.Q,19,0),i(r.C,286,0),i(r.D,30,0),i(r.v,320,0)}(),e.N);function c(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function u(e,r,n,i,s){let a,o,l=c(r),u=Math.ceil(i*l/8);l=Math.ceil(l/8);let h=e[n],f=0;if(h>1&&(e[n]=[0,0,1][h-2]),3==h)for(f=l;f<u;f++)e[f+1]=e[f+1]+(e[f+1-l]>>>1)&255;for(let r=0;r<s;r++)if(h=e[(o=(a=n+r*u)+r+1)-1],f=0,0==h)for(;f<u;f++)e[a+f]=e[o+f];else if(1==h){for(;f<l;f++)e[a+f]=e[o+f];for(;f<u;f++)e[a+f]=e[o+f]+e[a+f-l]}else if(2==h)for(;f<u;f++)e[a+f]=e[o+f]+e[a+f-u];else if(3==h){for(;f<l;f++)e[a+f]=e[o+f]+(e[a+f-u]>>>1);for(;f<u;f++)e[a+f]=e[o+f]+(e[a+f-u]+e[a+f-l]>>>1)}else{for(;f<l;f++)e[a+f]=e[o+f]+d(0,e[a+f-u],0);for(;f<u;f++)e[a+f]=e[o+f]+d(e[a+f-l],e[a+f-u],e[a+f-l-u])}return e}function d(e,r,n){let i=e+r-n,s=i-e,a=i-r,o=i-n;return s*s<=a*a&&s*s<=o*o?e:a*a<=o*o?r:n}function h(e,r,n,i,s,a,o,l,c){let u=Math.min(r,s),d=Math.min(n,a),h=0,f=0;for(let n=0;n<d;n++)for(let a=0;a<u;a++)if(o>=0&&l>=0?(h=n*r+a<<2,f=(l+n)*s+o+a<<2):(h=(-l+n)*r-o+a<<2,f=n*s+a<<2),0==c)i[f]=e[h],i[f+1]=e[h+1],i[f+2]=e[h+2],i[f+3]=e[h+3];else if(1==c){var p=e[h+3]*(1/255),m=e[h]*p,g=e[h+1]*p,v=e[h+2]*p,y=i[f+3]*(1/255),b=i[f]*y,_=i[f+1]*y,w=i[f+2]*y;let r=1-p,n=p+y*r,s=0==n?0:1/n;i[f+3]=255*n,i[f+0]=(m+b*r)*s,i[f+1]=(g+_*r)*s,i[f+2]=(v+w*r)*s}else if(2==c)p=e[h+3],m=e[h],g=e[h+1],v=e[h+2],y=i[f+3],b=i[f],_=i[f+1],w=i[f+2],p==y&&m==b&&g==_&&v==w?(i[f]=0,i[f+1]=0,i[f+2]=0,i[f+3]=0):(i[f]=m,i[f+1]=g,i[f+2]=v,i[f+3]=p);else if(3==c){if(p=e[h+3],m=e[h],g=e[h+1],v=e[h+2],y=i[f+3],b=i[f],_=i[f+1],w=i[f+2],p==y&&m==b&&g==_&&v==w)continue;if(p<220&&y>20)return!1}return!0}return{decode:function(e){let r=new Uint8Array(e),n=8,s=i.readUshort,c=i.readUint,u={tabs:{},frames:[]},d=new Uint8Array(r.length),h,f=0,p=0,m=[137,80,78,71,13,10,26,10];for(var g,v=0;v<8;v++)if(r[v]!=m[v])throw"The input is not a PNG file!";for(;n<r.length;){let e=i.readUint(r,n);n+=4;let m=i.readASCII(r,n,4);if(n+=4,"IHDR"==m)y=n,u.width=i.readUint(r,y),y+=4,u.height=i.readUint(r,y),u.depth=r[y+=4],u.ctype=r[++y],u.compress=r[++y],u.filter=r[++y],u.interlace=r[++y],y++;else if("iCCP"==m){for(var y,b,_=n;0!=r[_];)_++;i.readASCII(r,n,_-n),r[_+1];let s=r.slice(_+2,n+e),a=null;try{a=o(s)}catch(e){a=l(s)}u.tabs[m]=a}else if("CgBI"==m)u.tabs[m]=r.slice(n,n+4);else if("IDAT"==m){for(v=0;v<e;v++)d[f+v]=r[n+v];f+=e}else if("acTL"==m)u.tabs[m]={num_frames:c(r,n),num_plays:c(r,n+4)},h=new Uint8Array(r.length);else if("fcTL"==m){0!=p&&((g=u.frames[u.frames.length-1]).data=a(u,h.slice(0,p),g.rect.width,g.rect.height),p=0);let e={x:c(r,n+12),y:c(r,n+16),width:c(r,n+4),height:c(r,n+8)},i=s(r,n+22),o={rect:e,delay:Math.round(1e3*(i=s(r,n+20)/(0==i?100:i))),dispose:r[n+24],blend:r[n+25]};u.frames.push(o)}else if("fdAT"==m){for(v=0;v<e-4;v++)h[p+v]=r[n+v+4];p+=e-4}else if("pHYs"==m)u.tabs[m]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==m)for(v=0,u.tabs[m]=[];v<8;v++)u.tabs[m].push(i.readUint(r,n+4*v));else if("tEXt"==m||"zTXt"==m){null==u.tabs[m]&&(u.tabs[m]={});var w=i.nextZero(r,n),x=i.readASCII(r,n,w-n),E=n+e-w-1;if("tEXt"==m)b=i.readASCII(r,w+1,E);else{var I=o(r.slice(w+2,w+2+E));b=i.readUTF8(I,0,I.length)}u.tabs[m][x]=b}else if("iTXt"==m){null==u.tabs[m]&&(u.tabs[m]={}),w=0,_=n,w=i.nextZero(r,_),x=i.readASCII(r,_,w-_);let s=r[_=w+1];r[_+1],_+=2,w=i.nextZero(r,_),i.readASCII(r,_,w-_),_=w+1,w=i.nextZero(r,_),i.readUTF8(r,_,w-_),E=e-((_=w+1)-n),0==s?b=i.readUTF8(r,_,E):(I=o(r.slice(_,_+E)),b=i.readUTF8(I,0,I.length)),u.tabs[m][x]=b}else if("PLTE"==m)u.tabs[m]=i.readBytes(r,n,e);else if("hIST"==m){let e=u.tabs.PLTE.length/3;for(v=0,u.tabs[m]=[];v<e;v++)u.tabs[m].push(s(r,n+2*v))}else if("tRNS"==m)3==u.ctype?u.tabs[m]=i.readBytes(r,n,e):0==u.ctype?u.tabs[m]=s(r,n):2==u.ctype&&(u.tabs[m]=[s(r,n),s(r,n+2),s(r,n+4)]);else if("gAMA"==m)u.tabs[m]=i.readUint(r,n)/1e5;else if("sRGB"==m)u.tabs[m]=r[n];else if("bKGD"==m)0==u.ctype||4==u.ctype?u.tabs[m]=[s(r,n)]:2==u.ctype||6==u.ctype?u.tabs[m]=[s(r,n),s(r,n+2),s(r,n+4)]:3==u.ctype&&(u.tabs[m]=r[n]);else if("IEND"==m)break;n+=e,i.readUint(r,n),n+=4}return 0!=p&&((g=u.frames[u.frames.length-1]).data=a(u,h.slice(0,p),g.rect.width,g.rect.height)),u.data=a(u,d,u.width,u.height),delete u.compress,delete u.interlace,delete u.filter,u},toRGBA8:function(e){let r=e.width,n=e.height;if(null==e.tabs.acTL)return[s(e.data,r,n,e).buffer];let i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);let a=r*n*4,o=new Uint8Array(a),l=new Uint8Array(a),c=new Uint8Array(a);for(let d=0;d<e.frames.length;d++){let f=e.frames[d],p=f.rect.x,m=f.rect.y,g=f.rect.width,v=f.rect.height,y=s(f.data,g,v,e);if(0!=d)for(var u=0;u<a;u++)c[u]=o[u];if(0==f.blend?h(y,g,v,o,r,n,p,m,0):1==f.blend&&h(y,g,v,o,r,n,p,m,1),i.push(o.buffer.slice(0)),0==f.dispose);else if(1==f.dispose)h(l,g,v,o,r,n,p,m,0);else if(2==f.dispose)for(u=0;u<a;u++)o[u]=c[u]}return i},_paeth:d,_copyTile:h,_bin:i}}();!function(){let{_copyTile:e}=ev,{_bin:r}=ev,n=ev._paeth;var i={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let n=r;for(let e=0;e<8;e++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update(e,r,n,s){for(let a=0;a<s;a++)e=i.table[255&(e^r[n+a])]^e>>>8;return e},crc:(e,r,n)=>0xffffffff^i.update(0xffffffff,e,r,n)};function s(e,r,n,i){r[n]+=e[0]*i>>4,r[n+1]+=e[1]*i>>4,r[n+2]+=e[2]*i>>4,r[n+3]+=e[3]*i>>4}function a(e){return Math.max(0,Math.min(255,e))}function o(e,r){let n=e[0]-r[0],i=e[1]-r[1],s=e[2]-r[2],a=e[3]-r[3];return n*n+i*i+s*s+a*a}function l(e,r,n,i,l,c,u){null==u&&(u=1);let d=i.length,h=[];for(var f,p=0;p<d;p++){let e=i[p];h.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(p=0;p<d;p++){let e=0xffffffff;for(var m=0,g=0;g<d;g++){var v=o(h[p],h[g]);g!=p&&v<e&&(e=v,m=g)}}let y=new Uint32Array(l.buffer),b=new Int16Array(r*n*4),_=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(p=0;p<_.length;p++)_[p]=255*((_[p]+.5)/16-.5);for(let l=0;l<n;l++)for(let w=0;w<r;w++){p=4*(l*r+w),2!=u?f=[a(e[p]+b[p]),a(e[p+1]+b[p+1]),a(e[p+2]+b[p+2]),a(e[p+3]+b[p+3])]:(v=_[4*(3&l)+(3&w)],f=[a(e[p]+v),a(e[p+1]+v),a(e[p+2]+v),a(e[p+3]+v)]),m=0;let x=0xffffff;for(g=0;g<d;g++){let e=o(f,h[g]);e<x&&(x=e,m=g)}let E=h[m],I=[f[0]-E[0],f[1]-E[1],f[2]-E[2],f[3]-E[3]];1==u&&(w!=r-1&&s(I,b,p+4,7),l!=n-1&&(0!=w&&s(I,b,p+4*r-4,3),s(I,b,p+4*r,5),w!=r-1&&s(I,b,p+4*r+4,1))),c[p>>2]=m,y[p>>2]=i[m]}}function c(e,n,s,a,o){null==o&&(o={});let{crc:l}=i,c=r.writeUint,u=r.writeUshort,d=r.writeASCII,h=8,f=e.frames.length>1,p,m=!1,g=33+20*!!f;if(null!=o.sRGB&&(g+=13),null!=o.pHYs&&(g+=21),null!=o.iCCP&&(g+=21+(p=pako.deflate(o.iCCP)).length+4),3==e.ctype){for(var v=e.plte.length,y=0;y<v;y++)e.plte[y]>>>24!=255&&(m=!0);g+=8+3*v+4+(m?8+ +v+4:0)}for(var b=0;b<e.frames.length;b++)f&&(g+=38),g+=(E=e.frames[b]).cimg.length+12,0!=b&&(g+=4);let _=new Uint8Array(g+=12),w=[137,80,78,71,13,10,26,10];for(y=0;y<8;y++)_[y]=w[y];if(c(_,h,13),d(_,h+=4,"IHDR"),c(_,h+=4,n),c(_,h+=4,s),_[h+=4]=e.depth,_[++h]=e.ctype,_[++h]=0,_[++h]=0,_[++h]=0,c(_,++h,l(_,h-17,17)),h+=4,null!=o.sRGB&&(c(_,h,1),d(_,h+=4,"sRGB"),_[h+=4]=o.sRGB,c(_,++h,l(_,h-5,5)),h+=4),null!=o.iCCP){let e=13+p.length;c(_,h,e),d(_,h+=4,"iCCP"),d(_,h+=4,"ICC profile"),h+=11,h+=2,_.set(p,h),c(_,h+=p.length,l(_,h-(e+4),e+4)),h+=4}if(null!=o.pHYs&&(c(_,h,9),d(_,h+=4,"pHYs"),c(_,h+=4,o.pHYs[0]),c(_,h+=4,o.pHYs[1]),_[h+=4]=o.pHYs[2],c(_,++h,l(_,h-13,13)),h+=4),f&&(c(_,h,8),d(_,h+=4,"acTL"),c(_,h+=4,e.frames.length),c(_,h+=4,null!=o.loop?o.loop:0),c(_,h+=4,l(_,h-12,12)),h+=4),3==e.ctype){for(c(_,h,3*(v=e.plte.length)),d(_,h+=4,"PLTE"),h+=4,y=0;y<v;y++){let r=3*y,n=e.plte[y],i=255&n,s=n>>>8&255,a=n>>>16&255;_[h+r+0]=i,_[h+r+1]=s,_[h+r+2]=a}if(c(_,h+=3*v,l(_,h-3*v-4,3*v+4)),h+=4,m){for(c(_,h,v),d(_,h+=4,"tRNS"),h+=4,y=0;y<v;y++)_[h+y]=e.plte[y]>>>24&255;c(_,h+=v,l(_,h-v-4,v+4)),h+=4}}let x=0;for(b=0;b<e.frames.length;b++){var E=e.frames[b];f&&(c(_,h,26),d(_,h+=4,"fcTL"),c(_,h+=4,x++),c(_,h+=4,E.rect.width),c(_,h+=4,E.rect.height),c(_,h+=4,E.rect.x),c(_,h+=4,E.rect.y),u(_,h+=4,a[b]),u(_,h+=2,1e3),_[h+=2]=E.dispose,_[++h]=E.blend,c(_,++h,l(_,h-30,30)),h+=4);let r=E.cimg;c(_,h,(v=r.length)+4*(0!=b));let n=h+=4;d(_,h,0==b?"IDAT":"fdAT"),h+=4,0!=b&&(c(_,h,x++),h+=4),_.set(r,h),c(_,h+=v,l(_,n,h-n)),h+=4}return c(_,h,0),d(_,h+=4,"IEND"),c(_,h+=4,l(_,h-4,4)),h+=4,_.buffer}function u(e,r,i){for(let s=0;s<e.frames.length;s++){let a=e.frames[s];a.rect.width;let o=a.rect.height,l=new Uint8Array(o*a.bpl+o);a.cimg=function(e,r,i,s,a,o,l){let c=[],u,d=[0,1,2,3,4];-1!=o?d=[o]:(r*s>5e5||1==i)&&(d=[0]),l&&(u={level:0});for(var h=0;h<d.length;h++){for(let o=0;o<r;o++)!function(e,r,i,s,a,o){let l=i*s,c=l+i;if(e[c]=o,c++,0==o)if(s<500)for(var u=0;u<s;u++)e[c+u]=r[l+u];else e.set(new Uint8Array(r.buffer,l,s),c);else if(1==o){for(u=0;u<a;u++)e[c+u]=r[l+u];for(u=a;u<s;u++)e[c+u]=r[l+u]-r[l+u-a]+256&255}else if(0==i){for(u=0;u<a;u++)e[c+u]=r[l+u];if(2==o)for(u=a;u<s;u++)e[c+u]=r[l+u];if(3==o)for(u=a;u<s;u++)e[c+u]=r[l+u]-(r[l+u-a]>>1)+256&255;if(4==o)for(u=a;u<s;u++)e[c+u]=r[l+u]-n(r[l+u-a],0,0)+256&255}else{if(2==o)for(u=0;u<s;u++)e[c+u]=r[l+u]+256-r[l+u-s]&255;if(3==o){for(u=0;u<a;u++)e[c+u]=r[l+u]+256-(r[l+u-s]>>1)&255;for(u=a;u<s;u++)e[c+u]=r[l+u]+256-(r[l+u-s]+r[l+u-a]>>1)&255}if(4==o){for(u=0;u<a;u++)e[c+u]=r[l+u]+256-n(0,r[l+u-s],0)&255;for(u=a;u<s;u++)e[c+u]=r[l+u]+256-n(r[l+u-a],r[l+u-s],r[l+u-a-s])&255}}}(a,e,o,s,i,d[h]);c.push(eg.deflate(a,u))}let f,p=1e9;for(h=0;h<c.length;h++)c[h].length<p&&(f=h,p=c[h].length);return c[f]}(a.img,o,a.bpp,a.bpl,l,r,i)}}function d(r,n,i,s,a){let o=a[0],c=a[1],u=a[2],d=a[3],m=a[4],g=a[5],v=6,y=8,b=255;for(var _=0;_<r.length;_++){let e=new Uint8Array(r[_]);for(var w=e.length,x=0;x<w;x+=4)b&=e[x+3]}let E=255!=b,I=function(r,n,i,s,a,o){let l=[];for(var c,u=0;u<r.length;u++){let c=new Uint8Array(r[u]),h=new Uint32Array(c.buffer),g=0,v=0,y=n,b=i,_=+!!s;if(0!=u){let w=o||s||1==u||0!=l[u-2].dispose?1:2,x=0,E=1e9;for(let e=0;e<w;e++){var d,p=new Uint8Array(r[u-1-e]);let s=new Uint32Array(r[u-1-e]),o=n,l=i,c=-1,f=-1;for(let e=0;e<i;e++)for(let r=0;r<n;r++)h[m=e*n+r]!=s[m]&&(r<o&&(o=r),r>c&&(c=r),e<l&&(l=e),e>f&&(f=e));-1==c&&(o=l=c=f=0),a&&(1==(1&o)&&o--,1==(1&l)&&l--);let _=(c-o+1)*(f-l+1);_<E&&(E=_,x=e,g=o,v=l,y=c-o+1,b=f-l+1)}p=new Uint8Array(r[u-1-x]),1==x&&(l[u-1].dispose=2),e(p,n,i,d=new Uint8Array(y*b*4),y,b,-g,-v,0),1==(_=+!!e(c,n,i,d,y,b,-g,-v,3))?f(c,n,i,d,{x:g,y:v,width:y,height:b}):e(c,n,i,d,y,b,-g,-v,0)}else d=c.slice(0);l.push({rect:{x:g,y:v,width:y,height:b},img:d,blend:_,dispose:0})}if(s)for(u=0;u<l.length;u++){if(1==(c=l[u]).blend)continue;let e=c.rect,s=l[u-1].rect,o=Math.min(e.x,s.x),d=Math.min(e.y,s.y),f={x:o,y:d,width:Math.max(e.x+e.width,s.x+s.width)-o,height:Math.max(e.y+e.height,s.y+s.height)-d};l[u-1].dispose=1,u-1!=0&&h(r,n,i,l,u-1,f,a),h(r,n,i,l,u,f,a)}if(1!=r.length)for(var m=0;m<l.length;m++)(c=l[m]).rect.width,c.rect.height;return l}(r,n,i,o,c,u),A={},T=[],k=[];if(0!=s){let e=[];for(x=0;x<I.length;x++)e.push(I[x].img.buffer);let r=p(function(e){let r=0;for(var n=0;n<e.length;n++)r+=e[n].byteLength;let i=new Uint8Array(r),s=0;for(n=0;n<e.length;n++){let r=new Uint8Array(e[n]),a=r.length;for(let e=0;e<a;e+=4){let n=r[e],a=r[e+1],o=r[e+2],l=r[e+3];0==l&&(n=a=o=0),i[s+e]=n,i[s+e+1]=a,i[s+e+2]=o,i[s+e+3]=l}s+=a}return i.buffer}(e),s);for(x=0;x<r.plte.length;x++)T.push(r.plte[x].est.rgba);let n=0;for(x=0;x<I.length;x++){let e=(N=I[x]).img.length;var R=new Uint8Array(r.inds.buffer,n>>2,e>>2);k.push(R);let i=new Uint8Array(r.abuf,n,e);g&&l(N.img,N.rect.width,N.rect.height,T,i,R),N.img.set(i),n+=e}}else for(_=0;_<I.length;_++){var N=I[_];let e=new Uint32Array(N.img.buffer);var S=N.rect.width;for(R=new Uint8Array(w=e.length),k.push(R),x=0;x<w;x++){let r=e[x];if(0!=x&&r==e[x-1])R[x]=R[x-1];else if(x>S&&r==e[x-S])R[x]=R[x-S];else{let e=A[r];if(null==e&&(A[r]=e=T.length,T.push(r),T.length>=300))break;R[x]=e}}}let C=T.length;for(C<=256&&0==m&&(y=Math.max(y=C<=2?1:C<=4?2:C<=16?4:8,d)),_=0;_<I.length;_++){(N=I[_]).rect.x,N.rect.y,S=N.rect.width;let e=N.rect.height,r=N.img;new Uint32Array(r.buffer);let n=4*S,i=4;if(C<=256&&0==m){var P=new Uint8Array((n=Math.ceil(y*S/8))*e);let s=k[_];for(let r=0;r<e;r++){x=r*n;let e=r*S;if(8==y)for(var U=0;U<S;U++)P[x+U]=s[e+U];else if(4==y)for(U=0;U<S;U++)P[x+(U>>1)]|=s[e+U]<<4-4*(1&U);else if(2==y)for(U=0;U<S;U++)P[x+(U>>2)]|=s[e+U]<<6-2*(3&U);else if(1==y)for(U=0;U<S;U++)P[x+(U>>3)]|=s[e+U]<<7-(7&U)}r=P,v=3,i=1}else if(0==E&&1==I.length){P=new Uint8Array(S*e*3);let s=S*e;for(x=0;x<s;x++){let e=3*x,n=4*x;P[e]=r[n],P[e+1]=r[n+1],P[e+2]=r[n+2]}r=P,v=2,i=3,n=3*S}N.img=r,N.bpl=n,N.bpp=i}return{ctype:v,depth:y,plte:T,frames:I}}function h(r,n,i,s,a,o,l){let c=Uint8Array,u=Uint32Array,d=new c(r[a-1]),h=new u(r[a-1]),p=a+1<r.length?new c(r[a+1]):null,m=new c(r[a]),g=new u(m.buffer),v=n,y=i,b=-1,_=-1;for(let e=0;e<o.height;e++)for(let r=0;r<o.width;r++){let i=o.x+r,l=o.y+e,c=l*n+i,u=g[c];0==u||0==s[a-1].dispose&&h[c]==u&&(null==p||0!=p[4*c+3])||(i<v&&(v=i),i>b&&(b=i),l<y&&(y=l),l>_&&(_=l))}-1==b&&(v=y=b=_=0),l&&(1==(1&v)&&v--,1==(1&y)&&y--),o={x:v,y:y,width:b-v+1,height:_-y+1};let w=s[a];w.rect=o,w.blend=1,w.img=new Uint8Array(o.width*o.height*4),0==s[a-1].dispose?(e(d,n,i,w.img,o.width,o.height,-o.x,-o.y,0),f(m,n,i,w.img,o)):e(m,n,i,w.img,o.width,o.height,-o.x,-o.y,0)}function f(r,n,i,s,a){e(r,n,i,s,a.width,a.height,-a.x,-a.y,2)}function p(e,r){let n,i=new Uint8Array(e),s=i.slice(0),a=new Uint32Array(s.buffer),o=m(s,r),l=o[0],c=o[1],u=i.length,d=new Uint8Array(u>>2);if(i.length<2e7)for(var h=0;h<u;h+=4)n=g(l,f=i[h]*(1/255),p=i[h+1]*(1/255),y=i[h+2]*(1/255),b=i[h+3]*(1/255)),d[h>>2]=n.ind,a[h>>2]=n.est.rgba;else for(h=0;h<u;h+=4){var f=i[h]*(1/255),p=i[h+1]*(1/255),y=i[h+2]*(1/255),b=i[h+3]*(1/255);for(n=l;n.left;)n=0>=v(n.est,f,p,y,b)?n.left:n.right;d[h>>2]=n.ind,a[h>>2]=n.est.rgba}return{abuf:s.buffer,inds:d,plte:c}}function m(e,r,n){null==n&&(n=1e-4);let i=new Uint32Array(e.buffer),s={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};s.bst=b(e,s.i0,s.i1),s.est=_(s.bst);let a=[s];for(;a.length<r;){let r=0,s=0;for(var o=0;o<a.length;o++)a[o].est.L>r&&(r=a[o].est.L,s=o);if(r<n)break;let l=a[s],c=function(e,r,n,i,s,a){for(i-=4;n<i;){for(;y(e,n,s)<=a;)n+=4;for(;y(e,i,s)>a;)i-=4;if(n>=i)break;let o=r[n>>2];r[n>>2]=r[i>>2],r[i>>2]=o,n+=4,i-=4}for(;y(e,n,s)>a;)n-=4;return n+4}(e,i,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=c||l.i1<=c){l.est.L=0;continue}let u={i0:l.i0,i1:c,bst:null,est:null,tdst:0,left:null,right:null};u.bst=b(e,u.i0,u.i1),u.est=_(u.bst);let d={i0:c,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(o=0,d.bst={R:[],m:[],N:l.bst.N-u.bst.N};o<16;o++)d.bst.R[o]=l.bst.R[o]-u.bst.R[o];for(o=0;o<4;o++)d.bst.m[o]=l.bst.m[o]-u.bst.m[o];d.est=_(d.bst),l.left=u,l.right=d,a[s]=u,a.push(d)}for(a.sort((e,r)=>r.bst.N-e.bst.N),o=0;o<a.length;o++)a[o].ind=o;return[s,a]}function g(e,r,n,i,s){if(null==e.left){var a;let o,l,c,u;return a=e.est.q,o=r-a[0],l=n-a[1],c=i-a[2],e.tdst=o*o+l*l+c*c+(u=s-a[3])*u,e}let o=v(e.est,r,n,i,s),l=e.left,c=e.right;o>0&&(l=e.right,c=e.left);let u=g(l,r,n,i,s);if(u.tdst<=o*o)return u;let d=g(c,r,n,i,s);return d.tdst<u.tdst?d:u}function v(e,r,n,i,s){let{e:a}=e;return a[0]*r+a[1]*n+a[2]*i+a[3]*s-e.eMq}function y(e,r,n){return e[r]*n[0]+e[r+1]*n[1]+e[r+2]*n[2]+e[r+3]*n[3]}function b(e,r,n){let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0];for(let a=r;a<n;a+=4){let r=e[a]*(1/255),n=e[a+1]*(1/255),o=e[a+2]*(1/255),l=e[a+3]*(1/255);s[0]+=r,s[1]+=n,s[2]+=o,s[3]+=l,i[0]+=r*r,i[1]+=r*n,i[2]+=r*o,i[3]+=r*l,i[5]+=n*n,i[6]+=n*o,i[7]+=n*l,i[10]+=o*o,i[11]+=o*l,i[15]+=l*l}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:s,N:n-r>>2}}function _(e){let{R:r}=e,{m:n}=e,{N:i}=e,s=n[0],a=n[1],o=n[2],l=n[3],c=0==i?0:1/i,u=[r[0]-s*s*c,r[1]-s*a*c,r[2]-s*o*c,r[3]-s*l*c,r[4]-a*s*c,r[5]-a*a*c,r[6]-a*o*c,r[7]-a*l*c,r[8]-o*s*c,r[9]-o*a*c,r[10]-o*o*c,r[11]-o*l*c,r[12]-l*s*c,r[13]-l*a*c,r[14]-l*o*c,r[15]-l*l*c],d=[Math.random(),Math.random(),Math.random(),Math.random()],h=0,f=0;if(0!=i)for(let e=0;e<16&&(d=w.multVec(u,d),f=Math.sqrt(w.dot(d,d)),d=w.sml(1/f,d),!(0!=e&&1e-9>Math.abs(f-h)));e++)h=f;let p=[s*c,a*c,o*c,l*c];return{Cov:u,q:p,e:d,L:h,eMq255:w.dot(w.sml(255,p),d),eMq:w.dot(d,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2])<<16|Math.round(255*p[1])<<8|(0|Math.round(255*p[0])))>>>0}}var w={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3]],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};ev.encode=function(e,r,n,i,s,a,o){null==i&&(i=0),null==o&&(o=!1);let l=d(e,r,n,i,[!1,!1,!1,0,o,!1]);return u(l,-1),c(l,r,n,s,a)},ev.encodeLL=function(e,r,n,i,s,a,o,l){let d={ctype:0+2*(1!=i)+4*(0!=s),depth:a,frames:[]},h=(i+s)*a,f=h*r;for(let i=0;i<e.length;i++)d.frames.push({rect:{x:0,y:0,width:r,height:n},img:new Uint8Array(e[i]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(f/8)});return u(d,0,!0),c(d,r,n,o,l)},ev.encode.compress=d,ev.encode.dither=l,ev.quantize=p,ev.quantize.getKDtree=m,ev.quantize.getNearest=g}();let ey={toArrayBuffer(e,r){let n=e.width,i=e.height,s=n<<2,a=new Uint32Array(e.getContext("2d").getImageData(0,0,n,i).data.buffer),o=(32*n+31)/32<<2,l=o*i,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h,f,p,m,g=1048576,v=0,y=0,b=0;function _(e){d.setUint16(y,e,!0),y+=2}function w(e){d.setUint32(y,e,!0),y+=4}_(19778),w(c),y+=4,w(122),w(108),w(n),w(-i>>>0),_(1),_(32),w(3),w(l),w(2835),w(2835),y+=8,w(0xff0000),w(65280),w(255),w(0xff000000),w(0x57696e20),function e(){for(;v<i&&g>0;){for(m=122+v*o,h=0;h<s;)g--,p=(f=a[b++])>>>24,d.setUint32(m+h,f<<8|p),h+=4;v++}b<a.length?(g=1048576,setTimeout(e,ey._dly)):r(u)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var eb={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},e_={[eb.CHROME]:16384,[eb.FIREFOX]:11180,[eb.DESKTOP_SAFARI]:16384,[eb.IE]:8192,[eb.IOS]:4096,[eb.ETC]:8192};let ew="undefined"!=typeof window,ex="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,eE=ew&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),eI=(ew||ex)&&(eE&&eE.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),eA=(ew||ex)&&(eE&&eE.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function eT(e,r,n=Date.now()){return new Promise(i=>{let s=e.split(","),a=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]),l=o.length,c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);let u=new Blob([c],{type:a});u.name=r,u.lastModified=n,i(u)})}function ek(e){return new Promise((r,n)=>{let i=new eA;i.onload=()=>r(i.result),i.onerror=e=>n(e),i.readAsDataURL(e)})}function eR(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=e=>n(e),i.src=e})}function eN(){if(void 0!==eN.cachedResult)return eN.cachedResult;let e=eb.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=eb.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=eb.IOS:/Safari/i.test(r)?e=eb.DESKTOP_SAFARI:/Firefox/i.test(r)?e=eb.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=eb.IE),eN.cachedResult=e,eN.cachedResult}function eS(e,r){let n=e_[eN()],i=e,s=r,a=i*s,o=i>s?s/i:i/s;for(;a>n*n;){let e=(n+i)/2,r=(n+s)/2;e<r?(s=r,i=r*o):(s=e*o,i=e),a=i*s}return{width:i,height:s}}function eC(e,r){let n,i;try{if(i=(n=new OffscreenCanvas(e,r)).getContext("2d"),null===i)throw Error("getContext of OffscreenCanvas returns null")}catch(e){i=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=r,[n,i]}function eP(e,r){let{width:n,height:i}=eS(e.width,e.height),[s,a]=eC(n,i);return r&&/jpe?g/.test(r)&&(a.fillStyle="white",a.fillRect(0,0,s.width,s.height)),a.drawImage(e,0,0,s.width,s.height),s}function eU(){return void 0!==eU.cachedResult||(eU.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),eU.cachedResult}function eO(e,r={}){return new Promise(function(n,i){let s,a;var o=function(){try{return a=eP(s,r.fileType||e.type),n([s,a])}catch(e){return i(e)}},l=function(r){try{var n=function(e){try{throw e}catch(e){return i(e)}};try{let r;return ek(e).then(function(e){try{return r=e,eR(r).then(function(e){try{return s=e,function(){try{return o()}catch(e){return i(e)}}()}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)}catch(e){n(e)}}catch(e){return i(e)}};try{if(eU()||[eb.DESKTOP_SAFARI,eb.MOBILE_SAFARI].includes(eN()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return s=e,o()}catch(e){return l()}},l)}catch(e){l()}})}function eL(e,r,n,i,s=1){return new Promise(function(a,o){let l;if("image/png"===r){let a,o;return a=e.getContext("2d"),{data:o}=a.getImageData(0,0,e.width,e.height),(l=new Blob([ev.encode([o.buffer],e.width,e.height,4096*s)],{type:r})).name=n,l.lastModified=i,d.call(this)}if("image/bmp"===r)return new Promise(r=>ey.toBlob(e,r)).then((function(e){try{return(l=e).name=n,l.lastModified=i,u.call(this)}catch(e){return o(e)}}).bind(this),o);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:s}).then((function(e){try{return(l=e).name=n,l.lastModified=i,c.call(this)}catch(e){return o(e)}}).bind(this),o);return eT(e.toDataURL(r,s),n,i).then((function(e){try{return l=e,c.call(this)}catch(e){return o(e)}}).bind(this),o);function c(){return u.call(this)}function u(){return d.call(this)}function d(){return a(l)}})}function eM(e){e.width=0,e.height=0}function eF(){return new Promise(function(e,r){let n,i,s,a;return void 0!==eF.cachedResult?e(eF.cachedResult):eT("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,eO(n).then(function(o){try{return i=o[1],eL(i,n.type,n.name,n.lastModified).then(function(n){try{return s=n,eM(i),eO(s).then(function(n){try{return a=n[0],eF.cachedResult=1===a.width&&2===a.height,e(eF.cachedResult)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})}function ej(e){return new Promise((r,n)=>{let i=new eA;i.onload=e=>{let n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return r(-2);let i=n.byteLength,s=2;for(;s<i&&!(8>=n.getUint16(s+2,!1));){let e=n.getUint16(s,!1);if(s+=2,65505==e){if(0x45786966!=n.getUint32(s+=2,!1))return r(-1);let e=18761==n.getUint16(s+=6,!1);s+=n.getUint32(s+4,e);let i=n.getUint16(s,e);s+=2;for(let a=0;a<i;a++)if(274==n.getUint16(s+12*a,e))return r(n.getUint16(s+12*a+8,e))}else{if(65280!=(65280&e))break;s+=n.getUint16(s,!1)}}return r(-1)},i.onerror=e=>n(e),i.readAsArrayBuffer(e)})}function eD(e,r){let{width:n}=e,{height:i}=e,{maxWidthOrHeight:s}=r,a,o=e;return isFinite(s)&&(n>s||i>s)&&([o,a]=eC(n,i),n>i?(o.width=s,o.height=i/n*s):(o.width=n/i*s,o.height=s),a.drawImage(e,0,0,o.width,o.height),eM(e)),o}function eB(e,r){let{width:n}=e,{height:i}=e,[s,a]=eC(n,i);switch(r>4&&r<9?(s.width=i,s.height=n):(s.width=n,s.height=i),r){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,i);break;case 4:a.transform(1,0,0,-1,0,i);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,i,0);break;case 7:a.transform(0,-1,-1,0,i,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(e,0,0,n,i),eM(e),s}function ez(e,r,n=0){return new Promise(function(i,s){let a,o,l,c,u,d,h,f,p,m,g,v,y,b,_,w,x,E,I,A;function T(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;a+=e,r.onProgress(Math.min(a,100))}function k(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;a=Math.min(Math.max(e,a),100),r.onProgress(a)}return a=n,o=r.maxIteration||10,l=1024*r.maxSizeMB*1024,T(),eO(e,r).then((function(n){try{return[,c]=n,T(),u=eD(c,r),T(),new Promise(function(n,i){var s;if(!(s=r.exifOrientation))return ej(e).then((function(e){try{return s=e,a.call(this)}catch(e){return i(e)}}).bind(this),i);function a(){return n(s)}return a.call(this)}).then((function(n){try{return d=n,T(),eF().then((function(n){try{return h=n?u:eB(u,d),T(),f=r.initialQuality||1,p=r.fileType||e.type,eL(h,p,e.name,e.lastModified,f).then((function(n){try{var a;if(m=n,T(),g=m.size>l,v=m.size>e.size,!g&&!v)return k(100),i(m);function d(){if(o--&&(_>l||_>y)){let r,n;return r=A?.95*I.width:I.width,n=A?.95*I.height:I.height,[x,E]=eC(r,n),E.drawImage(I,0,0,r,n),f*="image/png"===p?.85:.95,eL(x,p,e.name,e.lastModified,f).then(function(e){try{return w=e,eM(I),I=x,_=w.size,k(Math.min(99,Math.floor((b-_)/(b-l)*100))),d}catch(e){return s(e)}},s)}return[1]}return y=e.size,_=b=m.size,I=h,A=!r.alwaysKeepResolution&&g,(a=(function(e){for(;e;){if(e.then)return void e.then(a,s);try{if(e.pop){if(e.length)return e.pop()?R.call(this):e;e=d}else e=e.call(this)}catch(e){return s(e)}}}).bind(this))(d);function R(){return eM(I),eM(x),eM(u),eM(h),eM(c),k(100),i(w)}}catch(e){return s(e)}}).bind(this),s)}catch(e){return s(e)}}).bind(this),s)}catch(e){return s(e)}}).bind(this),s)}catch(e){return s(e)}}).bind(this),s)})}function eV(e,n){return new Promise(function(i,s){let a,o,l,c,u,d;if(a={...n},l=0,{onProgress:c}=a,a.maxSizeMB=a.maxSizeMB||1/0,u="boolean"!=typeof a.useWebWorker||a.useWebWorker,delete a.useWebWorker,a.onProgress=e=>{l=e,"function"==typeof c&&c(l)},!(e instanceof Blob||e instanceof eI))return s(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(Error("The file given is not an image"));if(d="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!u||"function"!=typeof Worker||d)return ez(e,a).then((function(e){try{return o=e,p.call(this)}catch(e){return s(e)}}).bind(this),s);var h=(function(){try{return p.call(this)}catch(e){return s(e)}}).bind(this),f=function(r){try{return ez(e,a).then(function(e){try{return o=e,h()}catch(e){return s(e)}},s)}catch(e){return s(e)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",new Promise((n,i)=>{var s;let o;r||(o=[],"function"==typeof(s="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n")?o.push(`(${s})()`):o.push(s),r=URL.createObjectURL(new Blob(o)));let l=new Worker(r);l.addEventListener("message",function(e){if(a.signal&&a.signal.aborted)l.terminate();else if(void 0===e.data.progress){if(e.data.error)return i(Error(e.data.error)),void l.terminate();n(e.data.file),l.terminate()}else a.onProgress(e.data.progress)}),l.addEventListener("error",i),a.signal&&a.signal.addEventListener("abort",()=>{i(a.signal.reason),l.terminate()}),l.postMessage({file:e,imageCompressionLibUrl:a.libURL,options:{...a,onProgress:void 0,signal:void 0}})}).then(function(e){try{return o=e,h()}catch(e){return f()}},f)}catch(e){f()}function p(){try{o.name=e.name,o.lastModified=e.lastModified}catch(e){}try{a.preserveExif&&"image/jpeg"===e.type&&(!a.fileType||a.fileType&&a.fileType===e.type)&&(o=ef(e,o))}catch(e){}return i(o)}})}function eH({isOpen:e,onClose:r}){let{user:n}=d(),{t:i,language:s,setLanguage:a}=(0,et.useLanguage)(),{theme:f,setTheme:p,resolvedTheme:m}=(0,er.useTheme)(),[g,v]=(0,l.useState)(""),[b,_]=(0,l.useState)(null),[x,E]=(0,l.useState)(null),[I,A]=(0,l.useState)(!1),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{n&&e&&(v(n.displayName||n.email?.split("@")[0]||""),E(n.photoURL),_(null))},[n,e]);let k=async()=>{if(n){A(!0);try{let e=n.photoURL;if(b){let r=b;try{r=await eV(b,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0,fileType:"image/jpeg"})}catch(e){console.error("Compression failed:",e)}let i=(0,eo.ref)(u.storage,`avatars/${n.uid}.jpg`);await (0,eo.uploadBytes)(i,r),e=await (0,eo.getDownloadURL)(i)}await (0,c.updateProfile)(n,{displayName:g,photoURL:e});let i=(0,h.ref)(u.database,`users/${n.uid}`);await (0,h.update)(i,{name:g,photoURL:e,lastUpdated:Date.now()}),r()}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile.")}finally{A(!1)}}};return e?(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,o.jsxs)("div",{className:`${"light"===m?"bg-white":"bg-[#1E1E1E]"} w-full max-w-md rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-2xl overflow-hidden relative flex flex-col max-h-[90vh]`,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:i("profile.title")}),(0,o.jsx)("button",{onClick:r,className:"p-2 hover:bg-muted rounded-full text-muted-foreground hover:text-foreground transition-colors",children:(0,o.jsx)(es,{size:20})})]}),(0,o.jsxs)("div",{className:"p-6 flex flex-col gap-6 overflow-y-auto",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>T.current?.click(),children:[(0,o.jsx)("div",{className:"w-24 h-24 rounded-full border-2 border-primary overflow-hidden bg-muted flex items-center justify-center",children:x?(0,o.jsx)("img",{src:x,alt:"Avatar",className:"w-full h-full object-cover"}):(0,o.jsx)(w,{className:"w-10 h-10 text-muted-foreground"})}),(0,o.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,o.jsx)(el,{className:"text-white w-6 h-6"})}),(0,o.jsx)("input",{type:"file",ref:T,onChange:e=>{if(e.target.files&&e.target.files[0]){let r=e.target.files[0];_(r),E(URL.createObjectURL(r))}},className:"hidden",accept:"image/*"})]})}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:i("profile.display_name")}),(0,o.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),className:"w-full bg-input border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",placeholder:i("profile.display_name")})]}),(0,o.jsx)("div",{className:"h-[1px] bg-border w-full my-2"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[(0,o.jsx)(ec,{className:"w-3 h-3"})," ",i("profile.language")]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)("button",{onClick:()=>a("en"),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${"en"===s?"bg-primary/10 border-primary text-primary":"bg-input border-transparent text-muted-foreground hover:bg-muted"}`,children:"English"}),(0,o.jsx)("button",{onClick:()=>a("vi"),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${"vi"===s?"bg-primary/10 border-primary text-primary":"bg-input border-transparent text-muted-foreground hover:bg-muted"}`,children:"Ting Vit"})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[(0,o.jsx)(eh,{className:"w-3 h-3"})," ",i("profile.theme")]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,o.jsxs)("button",{onClick:()=>p("light"),className:`flex flex-col items-center gap-1 p-2 rounded-lg text-xs font-medium border transition-all ${"light"===f?"bg-primary/10 border-primary text-primary":"bg-input border-transparent text-muted-foreground hover:bg-muted"}`,children:[(0,o.jsx)(ed,{className:"w-4 h-4"}),i("profile.light")]}),(0,o.jsxs)("button",{onClick:()=>p("dark"),className:`flex flex-col items-center gap-1 p-2 rounded-lg text-xs font-medium border transition-all ${"dark"===f?"bg-primary/10 border-primary text-primary":"bg-input border-transparent text-muted-foreground hover:bg-muted"}`,children:[(0,o.jsx)(eu,{className:"w-4 h-4"}),i("profile.dark")]}),(0,o.jsxs)("button",{onClick:()=>p("system"),className:`flex flex-col items-center gap-1 p-2 rounded-lg text-xs font-medium border transition-all ${"system"===f?"bg-primary/10 border-primary text-primary":"bg-input border-transparent text-muted-foreground hover:bg-muted"}`,children:[(0,o.jsx)(eh,{className:"w-4 h-4"}),i("profile.system")]})]})]})]}),(0,o.jsxs)("div",{className:"p-4 border-t border-border flex gap-3 justify-end bg-muted/20",children:[(0,o.jsx)("button",{onClick:r,disabled:I,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors disabled:opacity-50",children:i("common.cancel")}),(0,o.jsx)("button",{onClick:k,disabled:I||!g.trim(),className:"px-6 py-2 rounded-lg text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:I?(0,o.jsx)(y,{className:"w-4 h-4 animate-spin"}):i("common.save")})]})]})}):null}eV.getDataUrlFromFile=ek,eV.getFilefromDataUrl=eT,eV.loadImage=eR,eV.drawImageInCanvas=eP,eV.drawFileInCanvas=eO,eV.canvasToFile=eL,eV.getExifOrientation=ej,eV.handleMaxWidthOrHeight=eD,eV.followExifOrientation=eB,eV.cleanupCanvasMemory=eM,eV.isAutoOrientationInBrowser=eF,eV.approximateBelowMaximumCanvasSizeOfBrowser=eS,eV.copyExifWithoutOrientation=ef,eV.getBrowserName=eN,eV.version="2.0.2";let eW=v("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),eq=v("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),e$=v("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function eK({onChatStart:e}){let{user:r}=d(),{requests:n,sendRequest:i,acceptRequest:s,rejectRequest:a,loading:c}=function(e){let[r,n]=(0,l.useState)([]),[i,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!e)return;let r=(0,h.ref)(u.database,"friend_requests"),i=(0,h.query)(r,(0,h.orderByChild)("to"),(0,h.equalTo)(e.uid)),s=(0,h.onValue)(i,e=>{let r=e.val();r?n(Object.entries(r).map(([e,r])=>({id:e,...r})).filter(e=>"pending"===e.status)):n([])});return()=>s()},[e]),{requests:r,sendRequest:async r=>{if(!e||!r)return{success:!1,error:"Invalid data"};s(!0);try{let n=(0,h.ref)(u.database,"users"),i=(await (0,h.get)(n)).val(),a=null;if(i){for(let[e,n]of Object.entries(i))if(n.email===r){a={uid:e,...n};break}}if(!a)return s(!1),{success:!1,error:"User not found"};if(a.uid===e.uid)return s(!1),{success:!1,error:"Cannot add yourself"};let o=(0,h.push)((0,h.ref)(u.database,"friend_requests"));return await (0,h.update)(o,{from:e.uid,fromName:e.displayName||"Unknown",fromPhoto:e.photoURL||"",to:a.uid,status:"pending",timestamp:Date.now()}),s(!1),{success:!0}}catch(e){return s(!1),{success:!1,error:e.message}}},acceptRequest:async(r,n)=>{if(e)try{let i=(0,h.ref)(u.database,`friend_requests/${r}`);await (0,h.update)(i,{status:"accepted"}),(0,h.ref)(u.database,`users/${e.uid}/friends/${n}`),await (0,h.update)((0,h.ref)(u.database,`users/${e.uid}/friends`),{[n]:!0}),(0,h.ref)(u.database,`users/${n}/friends/${e.uid}`),await (0,h.update)((0,h.ref)(u.database,`users/${n}/friends`),{[e.uid]:!0})}catch(e){console.error("Error accepting",e)}},rejectRequest:async e=>{let r=(0,h.ref)(u.database,`friend_requests/${e}`);await (0,h.update)(r,{status:"rejected"})},loading:i}}(r),{resolvedTheme:f}=(0,er.useTheme)(),{friends:p}=ee(r),{t:m}=(0,et.useLanguage)(),[g,v]=(0,l.useState)(""),[b,_]=(0,l.useState)(null),x=async()=>{if(!g.trim())return;_(null);let e=await i(g.trim());e.success?(_({success:!0,msg:m("friends.request_sent")}),v("")):_({success:!1,msg:e.error||m("friends.failed")})};return(0,o.jsxs)("div",{className:`${"light"===f?"bg-white":"bg-[#1E1E1E]"} w-full max-w-md rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-2xl overflow-hidden flex flex-col max-h-[80vh] pb-[env(safe-area-inset-bottom)]`,children:[(0,o.jsx)("div",{className:"p-4 border-b border-border",children:(0,o.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:m("friends.title")})}),(0,o.jsxs)("div",{className:"p-4 overflow-y-auto space-y-6 custom-scrollbar",children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("h3",{className:"text-xs font-bold text-muted-foreground uppercase",children:m("friends.add_by_email")}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsxs)("div",{className:"relative flex-1",children:[(0,o.jsx)("input",{type:"email",value:g,onChange:e=>v(e.target.value),placeholder:m("friends.email_placeholder"),className:"w-full bg-input border border-border rounded-lg pl-9 pr-4 py-2 text-foreground text-sm focus:outline-none focus:border-primary transition-colors placeholder:text-muted-foreground"}),(0,o.jsx)(eW,{className:"absolute left-3 top-2.5 text-muted-foreground w-4 h-4"})]}),(0,o.jsx)("button",{onClick:x,disabled:c||!g,className:"bg-primary text-primary-foreground px-3 py-2 rounded-lg font-medium text-sm hover:bg-primary/90 disabled:opacity-50 flex items-center gap-2",children:c?(0,o.jsx)(y,{className:"w-4 h-4 animate-spin"}):(0,o.jsx)(eq,{className:"w-4 h-4"})})]}),b&&(0,o.jsx)("p",{className:`text-xs ${b.success?"text-green-500":"text-destructive"}`,children:b.msg})]}),n.length>0&&(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("h3",{className:"text-xs font-bold text-primary uppercase",children:[m("friends.pending_requests")," (",n.length,")"]}),(0,o.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-muted/30 p-3 rounded-lg border border-border",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-muted overflow-hidden flex items-center justify-center border border-border",children:e.fromPhoto?(0,o.jsx)("img",{src:e.fromPhoto,className:"w-full h-full object-cover"}):(0,o.jsx)(w,{className:"w-4 h-4 text-muted-foreground"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.fromName}),(0,o.jsx)("p",{className:"text-[10px] text-muted-foreground",children:new Date(e.timestamp).toLocaleDateString()})]})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>s(e.id,e.from),className:"p-1.5 bg-green-500/10 text-green-500 rounded hover:bg-green-500/20 transition-colors",children:(0,o.jsx)(e$,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:()=>a(e.id),className:"p-1.5 bg-red-500/10 text-red-500 rounded hover:bg-red-500/20 transition-colors",children:(0,o.jsx)(es,{className:"w-4 h-4"})})]})]},e.id))})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("h3",{className:"text-xs font-bold text-muted-foreground uppercase",children:[m("friends.my_friends")," (",p.length,")"]}),0===p.length?(0,o.jsx)("p",{className:"text-sm text-muted-foreground italic",children:m("friends.no_friends")}):(0,o.jsx)("div",{className:"space-y-2",children:p.map(r=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer group",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"w-8 h-8 rounded-full bg-muted overflow-hidden flex items-center justify-center border border-border relative",children:["online"===r.status&&(0,o.jsx)("div",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-background"}),r.photoURL?(0,o.jsx)("img",{src:r.photoURL,alt:r.name,className:"w-full h-full object-cover"}):(0,o.jsx)(w,{className:"w-4 h-4 text-muted-foreground"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-foreground group-hover:text-primary transition-colors",children:r.name||"Unknown"}),(0,o.jsx)("p",{className:"text-[10px] text-muted-foreground",children:r.status||"offline"})]})]}),(0,o.jsx)("button",{onClick:n=>{n.stopPropagation(),e?.({uid:r.uid,displayName:r.name||"Friend",photoURL:r.photoURL})},className:"p-2 bg-muted hover:bg-primary/10 hover:text-primary rounded-full transition-colors text-muted-foreground",title:m("common.chat"),children:(0,o.jsx)(Y,{className:"w-4 h-4"})})]},r.uid))})]})]})]})}let eG=v("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eQ=v("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function eJ(){let{user:e,loading:r}=d(),{t:n}=(0,et.useLanguage)(),{resolvedTheme:i}=(0,er.useTheme)(),s="light"===i?"bg-white":"bg-[#1E1E1E]",{location:a,speed:c}=function(e){let[r,n]=(0,l.useState)(null),[i,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!e)return;if(!("geolocation"in navigator))return void console.error("Geolocation not supported");let r=navigator.geolocation.watchPosition(r=>{let{latitude:i,longitude:a,speed:o}=r.coords;n({lat:i,lng:a}),s(o);let l=(0,h.ref)(u.database,`users/${e.uid}`);(0,h.update)(l,{location:{lat:i,lng:a},speed:o,status:"online",lastUpdated:Date.now()}),(0,h.onDisconnect)(l).update({status:"offline"})},e=>{console.error("Error getting location:",e),console.error("Error details:",{code:e.code,message:e.message})},{enableHighAccuracy:!1,timeout:2e4,maximumAge:1e4});return()=>navigator.geolocation.clearWatch(r)},[e]),(0,l.useEffect)(()=>{e&&navigator.getBattery&&navigator.getBattery().then(r=>{let n=()=>{let n=(0,h.ref)(u.database,`users/${e.uid}`);(0,h.update)(n,{battery:Math.round(100*r.level),isCharging:r.charging})};n(),r.addEventListener("levelchange",n),r.addEventListener("chargingchange",n)})},[e]),{location:r,speed:i}}(e),[f,p]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),[v,b]=(0,l.useState)(null);return r?(0,o.jsx)("main",{className:"flex min-h-screen items-center justify-center bg-background text-primary",children:(0,o.jsx)(y,{className:"w-10 h-10 animate-spin"})}):e?(0,o.jsxs)("main",{className:"flex h-[100dvh] flex-col bg-background relative overflow-hidden",children:[(0,o.jsx)(en,{userLocation:a,speed:c,onChatStart:e=>b(e),onOpenFriends:()=>g(!0)}),(0,o.jsxs)("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-3",children:[(0,o.jsx)("button",{onClick:()=>p(!0),className:`${s} p-3 rounded-full border border-neutral-200 dark:border-neutral-800 text-foreground/80 hover:text-foreground hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all shadow-lg`,title:n("common.profile"),children:(0,o.jsx)(eG,{size:24})}),(0,o.jsx)("button",{onClick:()=>g(!0),className:`${s} p-3 rounded-full border border-neutral-200 dark:border-neutral-800 text-foreground/80 hover:text-foreground hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all shadow-lg`,title:n("common.friends"),children:(0,o.jsx)(eQ,{size:24})})]}),(0,o.jsx)(eH,{isOpen:f,onClose:()=>p(!1)}),m&&(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,o.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,o.jsxs)("button",{onClick:()=>g(!1),className:"absolute -top-12 right-0 p-2 text-white/50 hover:text-white flex items-center gap-1",children:[(0,o.jsx)(es,{size:20})," ",n("common.close")]}),(0,o.jsx)(eK,{onChatStart:e=>{b(e),g(!1)}})]})}),v&&(0,o.jsx)(ea,{user:e,friendUid:v.uid,friendName:v.displayName,onClose:()=>b(null)})]}):(0,o.jsx)(E,{})}e.s(["default",()=>eJ],52683)}]);